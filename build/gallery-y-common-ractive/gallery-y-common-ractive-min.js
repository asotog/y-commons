YUI.add("gallery-y-common-ractive",function(e,t){function n(e){e.template=e.container.getHTML(),e.container.empty(),e.el=e.container.getDOMNode();var t=e.complete;e.complete=function(){e.container.addClass("ractive-ready"),t?t():null},n.superclass.constructor.call(this,e)}(function(e){"use strict";var t=e.Ractive,n=function(){var e={el:void 0,append:!1,template:void 0,preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],handlebars:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,noCssTransform:!1,debug:!1};return e}(),r={linear:function(e){return e},easeIn:function(e){return Math.pow(e,3)},easeOut:function(e){return Math.pow(e-1,3)+1},easeInOut:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)}},i=[],s=Object.prototype.hasOwnProperty,o=function(){var e=Object.prototype.toString;return function(t){return e.call(t)==="[object Array]"}}(),u=function(){var e=Object.prototype.toString;return function(t){return t&&e.call(t)==="[object Object]"}}(),a=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},f=function(e,t,n,r,i){var s,o,u;return e.push(function(){o=e.interpolate}),u=/^([+-]?[0-9]+\.?(?:[0-9]+)?)(px|em|ex|%|in|cm|mm|pt|pc)$/,s={number:function(e,t){var n;return!i(e)||!i(t)?null:(e=+e,t=+t,n=t-e,n?function(t){return e+t*n}:function(){return e})},array:function(e,t){var r,i,s,u;if(!n(e)||!n(t))return null;r=[],i=[],u=s=Math.min(e.length,t.length);while(u--)i[u]=o(e[u],t[u]);for(u=s;u<e.length;u+=1)r[u]=e[u];for(u=s;u<t.length;u+=1)r[u]=t[u];return function(e){var t=s;while(t--)r[t]=i[t](e);return r}},object:function(e,n){var i,s,u,a,f;if(!r(e)||!r(n))return null;i=[],a={},u={};for(f in e)t.call(e,f)&&(t.call(n,f)?(i.push(f),u[f]=o(e[f],n[f])):a[f]=e[f]);for(f in n)t.call(n,f)&&!t.call(e,f)&&(a[f]=n[f]);return s=i.length,function(e){var t=s,n;while(t--)n=i[t],a[n]=u[n](e);return a}},cssLength:function(e,t){var n,r,i,s,o,a,f,l;return e!==0&&typeof e!="string"||t!==0&&typeof t!="string"?null:(n=u.exec(e),r=u.exec(t),i=n?n[2]:"",s=r?r[2]:"",i&&s&&i!==s?null:(f=i||s,o=n?+n[1]:0,a=r?+r[1]:0,l=a-o,l?function(e){return o+e*l+f}:function(){return o+f}))}},s}(i,s,o,u,a),l=function(){var e;return typeof document=="undefined"?e=!1:e=document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),e}(),c={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},h=function(e,t){var n;return e?n=function(e,n){return!n||n===t.html?document.createElement(e):document.createElementNS(n,e)}:n=function(e,n){if(n&&n!==t.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(e)},n}(l,c),p=function(){var e=typeof document=="object";return e}(),d=function(e){var t;try{Object.defineProperty({},"test",{value:0}),e&&Object.defineProperty(document.createElement("div"),"test",{value:0}),t=Object.defineProperty}catch(n){t=function(e,t,n){e[t]=n.value}}return t}(p),v=function(e,t,n){var r;try{try{Object.defineProperties({},{test:{value:0}})}catch(i){throw i}n&&Object.defineProperties(e("div"),{test:{value:0}}),r=Object.defineProperties}catch(i){r=function(e,n){var r;for(r in n)n.hasOwnProperty(r)&&t(e,r,n[r])}}return r}(h,d,p),m=function(e){return function(n,r,i){var s;if(typeof r!="string"||!e(i))throw new Error("Bad arguments");s=+n.get(r)||0;if(!e(s))throw new Error("Cannot add to a non-numeric value");return n.set(r,s+i)}}(a),g=function(e){return function(n,r){return e(this,n,r===undefined?1:+r)}}(m),y=function(e,t){return e===null&&t===null?!0:typeof e=="object"||typeof t=="object"?!1:e===t},b=function(){function i(e){setTimeout(e,0)}function s(e,t){return function(){var n;while(n=e.shift())n(t)}}function o(t,n,r,i){var s;if(n===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(n instanceof e)n.then(r,i);else if(!n||typeof n!="object"&&typeof n!="function")r(n);else{try{s=n.then}catch(u){i(u);return}if(typeof s=="function"){var a,f,l;f=function(e){if(a)return;a=!0,o(t,e,r,i)},l=function(e){if(a)return;a=!0,i(e)};try{s.call(n,f,l)}catch(u){if(!a){i(u),a=!0;return}}}else r(n)}}var e,t={},n={},r={};return typeof b=="function"?e=b:(e=function(u){var a=[],f=[],l=t,c,h,p,d,v,m;p=function(e){return function(r){if(l!==t)return;c=r,l=e,h=s(l===n?a:f,c),i(h)}},d=p(n),v=p(r);try{u(d,v)}catch(g){v(g)}return m={then:function(n,r){var s=new e(function(e,u){var c=function(t,n,r){typeof t=="function"?n.push(function(n){var r;try{r=t(n),o(s,r,e,u)}catch(i){u(i)}}):n.push(r)};c(n,a,e),c(r,f,u),l!==t&&i(h)});return s}},m["catch"]=function(e){return this.then(null,e)},m},e.all=function(t){return new e(function(e,n){var r=[],i,s,o;if(!t.length){e(r);return}o=function(s){t[s].then(function(t){r[s]=t,--i||e(r)},n)},i=s=t.length;while(s--)o(s)})},e.resolve=function(t){return new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})}),e}(),w=function(){var e=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;return function(n){return(n||"").replace(e,".$1")}}(),E=["o","ms","moz","webkit"],S=function(e){var t;return typeof window=="undefined"?t=null:(function(e,t,n){var r,i;if(n.requestAnimationFrame)return;for(r=0;r<e.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[e[r]+"RequestAnimationFrame"];n.requestAnimationFrame||(i=n.setTimeout,n.requestAnimationFrame=function(e){var n,r,s;return n=Date.now(),r=Math.max(0,16-(n-t)),s=i(function(){e(n+r)},r),t=n+r,s})}(e,0,window),t=window.requestAnimationFrame),t}(E),x=function(){var e;return typeof window!="undefined"&&window.performance&&typeof 
window.performance.now=="function"?e=function(){return window.performance.now()}:e=function(){return Date.now()},e}(),T=function(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1)},N=function(e,t,n){var r,i,s,o,u,a,f="/* Ractive.js component styles */\n",l={},c=[];return t?(e.push(function(){i=e.runloop}),s=document.createElement("style"),s.type="text/css",o=document.getElementsByTagName("head")[0],a=!1,u=s.styleSheet,r={add:function(e){if(!e.css)return;l[e._guid]||(l[e._guid]=0,c.push(e.css),i.scheduleCssUpdate()),l[e._guid]+=1},remove:function(e){if(!e.css)return;l[e._guid]-=1,l[e._guid]||(n(c,e.css),i.scheduleCssUpdate())},update:function(){var e;c.length?(e=f+c.join(" "),u?u.cssText=e:s.innerHTML=e,a||o.appendChild(s)):a&&o.removeChild(s)}}):r=null,r}(i,p,T),C=function(e,t){var n,r,i,s,o,u;n=[],u=e._rendering?e.fragment.docFrag:e.el,r=u.querySelectorAll('input[type="checkbox"][name="{{'+t+'}}"]'),s=r.length;for(o=0;o<s;o+=1)i=r[o],(i.hasAttribute("checked")||i.checked)&&n.push(i._ractive.value);return n},k=function(e){do if(e.context)return e.context;while(e=e.parent);return""},L=function(e,t,n){function s(e,t){var n;if(t===".")return e;n=e?e.split("."):[];if(t.substr(0,3)==="../"){while(t.substr(0,3)==="../"){if(!n.length)throw new Error(r);n.pop(),t=t.substring(3)}return n.push(t),n.join(".")}return e?e+t.replace(/^\.\//,"."):t.replace(/^\.\/?/,"")}var r,i;return r='Could not resolve reference - too many "../" prefixes',i={evaluateWrapped:!0},function(o,u,a){var f,l,c,h;u=e(u);if(u.charAt(0)===".")return s(n(a),u);l=u.split(".")[0];do{f=a.context;if(!f)continue;h=!0,c=o.viewmodel.get(f,i);if(c&&(typeof c=="object"||typeof c=="function")&&l in c)return f+"."+u}while(a=a.parent);if(!h&&(!o._parent||o.isolated))return u;if(t.call(o.data,l))return u;if(o.viewmodel.get(u)!==undefined)return u}}(w,s,k),A=function(t){var n=[""],r,i,s,o;r=t.length;while(r--){i=t[r],s=i.split(".");while(s.length>1)s.pop(),o=s.join("."),n[o]!==!0&&(n.push(o),n[o]=!0)}return n},O=function(){function n(e){var t,n,i,s,o,u;t=e.split("."),n=r(t.length),o=[],i=function(e,n){return e?"*":t[n]},s=n.length;while(s--)u=n[s].map(i).join("."),o[u]||(o.push(u),o[u]=!0);return o}function r(e){var n="",r,i,s,o,u;if(!t[e]){s=[];while(n.length<e)n+=1;r=parseInt(n,2),o=function(e){return e==="1"};for(u=0;u<=r;u+=1){i=u.toString(2);while(i.length<e)i="0"+i;s[u]=Array.prototype.map.call(i,o)}t[e]=s}return t[e]}var e=/[^\.]+$/,t={};return function i(t,r,s,o,u){var a,f,l,c,h,p,d,v;a=t._patternObservers.length;while(a--)f=t._patternObservers[a],f.regex.test(s)&&f.update(s);if(o)return;v=function(n){if(l=t.viewmodel.depsMap[n]){a=l.length;while(a--)c=l[a],h=e.exec(c)[0],p=s?s+"."+h:h,i(t,c,p)}},u?(d=n(s),d.forEach(v)):v(r)}}(),M=function(e){function n(t,n,i){var s;t._patternObservers.length&&e(t,n,n,i,!0);for(s=0;s<t.viewmodel.deps.length;s+=1)r(t,n,s,i)}function r(e,n,r,o){var u=e.viewmodel.deps[r],a,f;if(!u)return;a=e.viewmodel.get(n),f=e.viewmodel.get(n,t),i(u[n],a,f);if(o)return;s(e.viewmodel.depsMap[n],e,r)}function i(e,t,n){e&&e.forEach(function(e){return e.setValue(t,n)})}function s(e,t,n,i){var s;if(e){s=e.length;while(s--)r(t,e[s],n,i)}}var t={evaluateWrapped:!0};return n.multiple=function(n,i,s){var o,u,a;a=i.length;if(n._patternObservers.length){o=a;while(o--)e(n,i[o],i[o],s,!0)}for(o=0;o<n.viewmodel.deps.length;o+=1)if(n.viewmodel.deps[o]){u=a;while(u--)r(n,i[u],o,s)}},n}(O),_=function(e){var t,n,r,i;return t=function(e,t){var s=[];return s.detachQueue=[],s.remove=r,s.init=i,s._check=n,s._callback=e,s._previous=t,t&&t.push(s),s},n=function(){var e;if(this._ready&&!this.length){while(e=this.detachQueue.pop())e.detach();typeof this._callback=="function"&&this._callback(),this._previous&&this._previous.remove(this)}},r=function(t){e(this,t),this._check()},i=function(){this._ready=!0,this._check()},t}(T),D=function(e,t,n,r,i,s,o,u){function S(){var e,n,i,u,a;i=w.length;while(i--)e=w[i],e.viewmodel.changes.length&&(n=s(e.viewmodel.changes),o.multiple(e,n,!0));x();while(f){f=!1;while(e=m.pop())e.update(),e.dirty=!1;while(e=b.pop())e();while(e=d.pop())e.root.viewmodel.set(e.keypath,r(e.root,e.keypath)),p[e.keypath]=!1;x()}while(e=g.pop())e.update();while(e=y.pop())e();while(e=h.pop())e.locked=!1;while(e=w.pop()){w[e._guid]=!1;if(e.viewmodel.changes.length){u={};while(a=e.viewmodel.changes.pop())u[a]=e.viewmodel.get(a);e.fire("change",u)}}c&&(t.update(),c=!1)}function x(){var e,t,n;if(!v.length)return;e=v.splice(0,v.length);while(t=e.pop()){if(t.keypath)continue;n=i(t.root,t.ref,t.parentFragment),n!==undefined?t.resolve(n):v.push(t)}}var a,f=!1,l=!1,c,h=[],p={},d=[],v=[],m=[],g=[],y=[],b=[],w=[],E;return a={start:function(e,t){this.addInstance(e),l||(E=u(t,E))},end:function(){if(l){x();return}l=!0;do S();while(f);l=!1,E.init(),E=E._previous},addInstance:function(e){e&&!w[e._guid]&&(w.push(e),w[w._guid]=!0)},registerTransition:function(e){e._manager=E,E.push(e)},viewUpdate:function(e){f=!0,g.push(e)},lockAttribute:function(e){e.locked=!0,h.push(e)},scheduleCssUpdate:function(){l?c=!0:t.update()},modelUpdate:function(e,t){t?n(m,e):(f=!0,m.push(e))},addCheckboxBinding:function(e){p[e.keypath]||(f=!0,d.push(e),p[e.keypath]=!0)},addUnresolved:function(e){f=!0,v.push(e)},removeUnresolved:function(e){n(v,e)},detachWhenReady:function(e){E.detachQueue.push(e)},afterModelUpdate:function(e){f=!0,b.push(e)},afterViewUpdate:function(e){f=!0,y.push(e)}},e.runloop=a,a}(i,N,T,C,L,A,M,_),P=function(e,t,n){var r=[],i={tick:function(){var s,o,u;u=t(),n.start();for(s=0;s<r.length;s+=1)o=r[s],o.tick(u)||r.splice(s--,1);n.end(),r.length?e(i.tick):i.running=!1},add:function(t){r.push(t),i.running||(i.running=!0,e(i.tick))},abort:function(e,t){var n=r.length,i;while(n--)i=r[n],i.root===t&&i.keypath===e&&i.stop()}};return i}(S,x,D),H=function(){var e,t={};return typeof console!="undefined"&&typeof console.warn=="function"&&typeof console.warn.apply=="function"?e=function(e,n){if(!n){if(t[e])return;t[e]=!0}console.warn(e)}:e=function(){},e}(),B=function(e,t,n
){function i(e,t,n){var r;u(n),r=o(e.defaults.adapt,n.adapt),t.defaults.adapt=r||[]}function s(e,t,n){u(n),t.adapt=o(e.defaults.adapt,n.adapt)||[]}function o(e,t){return e=a(e),t=a(t),!e||!e.length?t:!t||!t.length?e.slice():(e.forEach(function(e){t.indexOf(e)===-1&&t.push(e)}),t)}function u(n){var r=n.adaptors;r&&t(r)&&(e("The `adaptors` option, to indicate which adaptors should be used with a given Ractive instance, has been deprecated in favour of `adapt`."),n.adapt=o(n.adapt,r),delete n.adaptors)}function a(e){return typeof e=="string"&&(e=[e]),e}var r={name:"adapt",extend:i,init:s,useDefaults:n.hasOwnProperty("adapt")};return r}(H,o,n),j=function(e){var t=Array.prototype.slice,n=t.call(arguments,1),r,i;while(i=n.shift())for(r in i)i.hasOwnProperty(r)&&(e[r]=i[r]);return e},F=function(e,t){function n(n){t(this,n),this.useDefaults=e.hasOwnProperty(n.name)}return n.prototype={extend:function(e,t,n){var r,i,s;n=n||{},this.preExtend&&this.preExtend(e,t,n),r=this.getParentValue(e),i=this.getOptionValue(n),s=this.extendValue(t,r,i),this.postExtend&&(s=this.postExtend(t,s)),this.useDefaults&&(t=t.defaults),this.assign(t,s)},init:function(e,t,n){var r,i,s;n=n||{},this.preInit&&this.preInit(e,t,n),r=this.getParentValue(e),i=this.getOptionValue(n),s=this.initValue(t,r,i),this.postInit&&(s=this.postInit(t,s)),this.assign(t,s)},reset:function(e){if(!this.resetValue)return;var t=this.resetValue(e);if(t)return this.postInit&&(t=this.postInit(e,t)),e[this.name]=t,!0},assign:function(e,t){if(t==undefined)return;e[this.name]=t},getParentValue:function(e){if(e)return this.useDefaults&&(e=e.defaults),e[this.name]},getOptionValue:function(e){if(e)return e[this.name]}},function(t){return new n(t)}}(n,j),I=function(e){function t(e,t,n){return typeof n=="undefined"&&(n=t),n}return function(r){return e({name:r,extendValue:t,initValue:t})}}(F),q=function(){function i(e){return e.trim?e.trim():e.replace(/^\s+/,"").replace(/\s+$/,"")}function s(e){return e.str}var e=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,t=/\/\*.*?\*\//g,n=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~]+)?\s*[\s\+\>\~]?)\s*/g,r=/^@media/;return function(u,a){var f,l;return l=function(e){var t,r,i,o,u,f,l,c,h=[];t=[];while(r=n.exec(e))t.push({str:r[0],base:r[1],modifiers:r[2]});o='[data-rvcguid="'+a+'"]',u=t.map(s),c=t.length;while(c--)l=u.slice(),i=t[c],l[c]=i.base+o+i.modifiers||"",f=u.slice(),f[c]=o+" "+f[c],h.push(l.join(" "),f.join(" "));return h.join(", ")},f=u.replace(t,"").replace(e,function(e,t){var n,s;return r.test(t)?e:(n=t.split(",").map(i),s=n.map(l).join(", ")+" ",e.replace(t,s))}),f}}(),R=function(e,t,n){function i(e,n,r){var i;(i=s(r.css,n)||s(e.css,e))&&t(n,"css",{value:i})}function s(t,n){if(!t)return;return n.defaults.noCssTransform?t:e(t,n._guid)}var r={name:"css",extend:i,init:function(){},useDefaults:n.hasOwnProperty("css")};return r}(q,d,n),U=function(){var e;try{Object.create(null),e=Object.create}catch(t){e=function(){var e=function(){};return function(t,n){var r;return t===null?{}:(e.prototype=t,r=new e,n&&Object.defineProperties(r,n),r)}}()}return e}(),z=function(e,t){return t&&typeof t=="function"&&/_super/.test(e)?function(){var n="_super"in this,r=this._super,i;return this._super=t,i=e.apply(this,arguments),n&&(this._super=r),i}:e},W=function(e,t,n){function i(e,t,n){return t=u(t),a(t,n)}function s(e,t,n){var r=this.extendValue(e,t,n);return typeof r=="function"&&(r=r.call(e,n)||n),r||{}}function o(e){return this.initValue(e,e.constructor.defaults.data,e.data)}function u(e){if(typeof e!="function"||!Object.keys(e).length)return e;var t={};return f(e,t),a(e,t)}function a(e,t){return typeof t=="function"?h(t,e):typeof e=="function"?c(t,e):l(t,e)}function f(e,t,n){for(var r in e){if(n&&r in t)continue;t[r]=e[r]}}function l(e,n){return e=e||{},n&&Object.keys(n).length&&(n=t(n),f(e,n),e=n),e}function c(e,t){return function(n){var r;return e&&(r=Object.keys(e),n&&(r=r.filter(function(e){return!(e in n)}))),n=t.call(this,n)||n,r&&r.length&&(n=n||{},r.forEach(function(t){n[t]=e[t]})),n}}function h(e,t){var r;return typeof t!="function"?r=function(e){l(e,t)}:r=function(e){return t=n(t,function(){},!0),t.call(this,e)||e},n(e,r)}var r=e({name:"data",extendValue:i,initValue:s,resetValue:o});return r}(F,U,z),X=function(e,t){function i(e,t,r){"debug"in r||("debug"in e?r.debug=e.debug:n&&(n.defaults&&n.defaults.debug||n.debug)&&(r.debug=!0))}var n;t.push(function(){n=t.Ractive});var r=e("debug");return r.preExtend=r.preInit=i,r}(I,i),V=function(e,t){function r(e,n,r){return typeof r!="undefined"&&r!==null?typeof n=="function"?t(r,n):typeof r=="function"?r:void 0:n}var n=e({name:"complete",extendValue:r,initValue:r});return n}(F,z),$=function(e){function i(e,t,r){if(r.magic&&n)throw new Error("Getters and setters (magic mode) are not supported in this browser")}var t,n;try{Object.defineProperty({},"test",{value:0})}catch(r){n=!0}return t=e("magic"),t.preExtend=t.preInit=i,t}(I),J=function(e){return function(n,r){var i,s;return!e(n)||!e(r)?!1:n===r?!0:(i=Object.keys(n),s=Object.keys(r),i.length!==s.length?!1:i.every(function(e){return n[e]===r[e]}))}}(u),K=function(){var e,t,n;return typeof window=="undefined"&&(n=null),e=window,t=e.document,n={},t||(n=null),Date.now||(Date.now=function(){return+(new Date)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if(typeof i!="object"&&typeof i!="function"||i===null)throw new TypeError("Object.keys called on non-object");var s=[];for(var o in i)e.call(i,o)&&s.push(o);if(t)for(var u=0;u<r;u++)e.call(i,n[u])&&s.push(n[u]);return s}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;t===undefined&&(t=0),t<0&&(t+=this.length),t<0&&(t=0);for(n=this.
length;t<n;t++)if(this.hasOwnProperty(t)&&this[t]===e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;for(n=0,r=this.length;n<r;n+=1)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(e,t){var n=this,r,i,s=[],o;n instanceof String&&(n=n.toString(),o=!0);for(r=0,i=n.length;r<i;r+=1)if(n.hasOwnProperty(r)||o)s[r]=e.call(t,n[r],r,n);return s}),typeof Array.prototype.reduce!="function"&&(Array.prototype.reduce=function(e,t){var n,r,i,s;if("function"!=typeof e)throw new TypeError(e+" is not a function");i=this.length,s=!1,arguments.length>1&&(r=t,s=!0);for(n=0;n<i;n+=1)this.hasOwnProperty(n)?s&&(r=e(r,this[n],n,this)):(r=this[n],s=!0);if(!s)throw new TypeError("Reduce of empty array with no initial value");return r}),Array.prototype.filter||(Array.prototype.filter=function(e,t){var n,r,i=[];for(n=0,r=this.length;n<r;n+=1)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)&&(i[i.length]=this[n]);return i}),typeof Function.prototype.bind!="function"&&(Function.prototype.bind=function(e){var t,n,r,i,s=[].slice;if(typeof this!="function")throw new TypeError("Function.prototype.bind called on non-function");return t=s.call(arguments,1),n=this,r=function(){},i=function(){var i=this instanceof r&&e?this:e;return n.apply(i,t.concat(s.call(arguments)))},r.prototype=this.prototype,i.prototype=new r,i}),e.addEventListener||function(e,t){var n,r,i,s,o,u;n=function(e,t){var n,r=this;for(n in e)r[n]=e[n];r.currentTarget=t,r.target=e.srcElement||t,r.timeStamp=+(new Date),r.preventDefault=function(){e.returnValue=!1},r.stopPropagation=function(){e.cancelBubble=!0}},r=function(e,t){var r=this,i,s;i=r.listeners||(r.listeners=[]),s=i.length,i[s]=[t,function(e){t.call(r,new n(e,r))}],r.attachEvent("on"+e,i[s][1])},i=function(e,t){var n=this,r,i;if(!n.listeners)return;r=n.listeners,i=r.length;while(i--)r[i][0]===t&&n.detachEvent("on"+e,r[i][1])},e.addEventListener=t.addEventListener=r,e.removeEventListener=t.removeEventListener=i,"Element"in e?(e.Element.prototype.addEventListener=r,e.Element.prototype.removeEventListener=i):(u=t.createElement,t.createElement=function(e){var t=u(e);return t.addEventListener=r,t.removeEventListener=i,t},s=t.getElementsByTagName("head")[0],o=t.createElement("style"),s.insertBefore(o,s.firstChild))}(e,t),e.getComputedStyle||(n.getComputedStyle=function(){function e(t,n,r,i){var s=n[r],o=parseFloat(s),u=s.split(/\d/)[0],a;return i=i!=null?i:/%|em/.test(u)&&t.parentElement?e(t.parentElement,t.parentElement.currentStyle,"fontSize",null):16,a=r=="fontSize"?i:/width/i.test(r)?t.clientWidth:t.clientHeight,u=="em"?o*i:u=="in"?o*96:u=="pt"?o*96/72:u=="%"?o/100*a:o}function t(e,t){var n=t=="border"?"Width":"",r=t+"Top"+n,i=t+"Right"+n,s=t+"Bottom"+n,o=t+"Left"+n;e[t]=(e[r]==e[i]==e[s]==e[o]?[e[r]]:e[r]==e[s]&&e[o]==e[i]?[e[r],e[i]]:e[o]==e[i]?[e[r],e[i],e[s]]:[e[r],e[i],e[s],e[o]]).join(" ")}function n(n){var r,i,s,o;r=n.currentStyle,i=this,s=e(n,r,"fontSize",null);for(o in r)/width|height|margin.|padding.|border.+W/.test(o)&&i[o]!=="auto"?i[o]=e(n,r,o,s)+"px":o==="styleFloat"?i.float=r[o]:i[o]=r[o];return t(i,"margin"),t(i,"padding"),t(i,"border"),i.fontSize=s+"px",i}function r(e){return new n(e)}return n.prototype={constructor:n,getPropertyPriority:function(){},getPropertyValue:function(e){return this[e]||""},item:function(){},removeProperty:function(){},setProperty:function(){},getPropertyCSSValue:function(){}},r}()),n}(),Q=function(e,t,n,r){function i(e,t){var n=this;return o(e,function(e){return e[n.name][t]})}function s(e,t){var n=this;return o(e,function(e){return e[n.name][t]?e:void 0})}function o(e,t){var n,r;if(n=t(e))return n;if(!e.isolated&&(r=e._parent))return o(r,t)}function u(e,t,n){return t=c(t),h(t,n)}function a(e,t,n){var r=u(e,t,n);return typeof r=="function"&&(e._config[this.name]=r,r=l(e,r)),r}function f(e){var n,r,i=e._config[this.name];if(!i)return;n=e[this.name],r=l(e,i);if(!t(n,r))return r}function l(e,t){var n={},r=t.call(e,n,e.data);return p(r,n),n}function c(e){if(typeof e!="function"||!Object.keys(e).length)return e;var t={};return p(e,t),h(e,t)}function h(e,t){return typeof t=="function"?g(t,e):typeof e=="function"?m(t,e):v(t,e)}function p(e,t,n){for(var r in e){if(n&&r in t)continue;t[r]=e[r]}}function d(e,t){return p(e,t,!0)}function v(e,t){var n={};return e&&p(e,n),t&&d(t,n),n}function m(e,t){return function(n){var r=t.apply(this,arguments)||n;return e&&(r=v(e,r)),r}}function g(e,t){var r;return typeof t!="function"?t&&Object.keys(t).length?r=function(e){p(t,e)}:r=function(){}:r=function(e){t=n(t,function(){},!0);var r=t.apply(this,arguments);r&&p(r,e)},n(e,r)}return function(n){n=r(n,{extendValue:u,initValue:a,resetValue:f,find:i,findInstance:s});var o=e(n),l=o.assign.bind(o);return o.assign=function(e,t){l(e,t||{})},o}}(F,J,z,j,K),G=function(){function t(t){var n="var __ractive=this;return("+t.replace(e,function(e,t){return'__ractive.get("'+t+'")'})+")";return new Function(n)}var e=/\$\{([^\}]+)\}/g;return function(e){return typeof e=="function"?{get:e}:typeof e=="string"?{get:t(e)}:(typeof e=="object"&&typeof e.get=="string"&&(e={get:t(e.get),set:e.set}),e)}}(),Y=function(e){var t=function(e,t){this.root=e.ractive,this.keypath=t,this.priority=0,this.computation=e,this.root.viewmodel.register(this)};return t.prototype={setValue:function(t){e(t,this.value)||(this.value=t,this.computation.bubble())},teardown:function(){this.root.viewmodel.unregister(this)}},t}(y),Z=function(e,t,n){function i(e,t,r){var i,s,o;i=t.length;while(i--)s=t[i],r[s.keypath]||(t.splice(i,1),t[s.keypath]=null,s.teardown());i=r.length;while(i--)o=r[i],t[o]||(s=new n(e,o),t.push(t[o]=s))}var r=function(e,t,n){this.ractive=e,this.key=t,this.getter=n.get,this.setter=n.set,this.watchers=[],this.update()};return r.prototype={set:function(e){if(this.setting){this.value=e;return}if(!this.setter)throw new Error("Computed properties without setters are read-only in the current version");this.setter.call(this
.ractive,e)},compute:function(){var t,n;t=this.ractive,t.viewmodel.capture();try{this.value=this.getter.call(t)}catch(r){t.debug&&e('Failed to compute "'+this.key+'": '+r.message||r),n=!0}return i(this,this.watchers,t.viewmodel.release()),n?!1:!0},update:function(){this.compute()&&(this.setting=!0,this.ractive.viewmodel.set(this.key,this.value),this.setting=!1),this.dirty=!1},bubble:function(){this.watchers.length<=1?this.update():this.dirty||(t.modelUpdate(this),this.dirty=!0)}},r}(H,D,Y),et=function(e,t){return function(r,i){var s,o;for(s in i)o=e(i[s]),r.viewmodel.computations[s]=new t(r,s,o)}}(G,Z),tt=function(e,t){var n=e({name:"computed",postInit:t});return n}(Q,et),nt={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser"},rt={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTRIBUTE:13,CLOSING_TAG:14,COMPONENT:15,NUMBER_LITERAL:20,STRING_LITERAL:21,ARRAY_LITERAL:22,OBJECT_LITERAL:23,BOOLEAN_LITERAL:24,GLOBAL:26,KEY_VALUE_PAIR:27,REFERENCE:30,REFINEMENT:31,MEMBER:32,PREFIX_OPERATOR:33,BRACKETED:34,CONDITIONAL:35,INFIX_OPERATOR:36,INVOCATION:40,SECTION_IF:50,SECTION_UNLESS:51,SECTION_EACH:52,SECTION_WITH:53},it={expectedExpression:"Expected a JavaScript expression",expectedParen:"Expected closing paren"},st=function(e){var t=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;return function(n){var r;return(r=n.matchPattern(t))?{t:e.NUMBER_LITERAL,v:r}:null}}(rt),ot=function(e){return function(t){var n=t.remaining();return n.substr(0,4)==="true"?(t.pos+=4,{t:e.BOOLEAN_LITERAL,v:"true"}):n.substr(0,5)==="false"?(t.pos+=5,{t:e.BOOLEAN_LITERAL,v:"false"}):null}}(rt),ut=function(){var e,t,n;return e=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,t=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,n=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/,function(r){return function(i){var s,o,u,a;s=i.pos,o='"',u=!1;while(!u)a=i.matchPattern(e)||i.matchPattern(t)||i.matchString(r),a?a==='"'?o+='\\"':a==="\\'"?o+="'":o+=a:(a=i.matchPattern(n),a?o+="\\u"+("000"+a.charCodeAt(1).toString(16)).slice(-4):u=!0);return o+='"',JSON.parse(o)}}}(),at=function(e){return e('"')}(ut),ft=function(e){return e("'")}(ut),lt=function(e,t,n){return function(r){var i,s;return i=r.pos,r.matchString('"')?(s=n(r),r.matchString('"')?{t:e.STRING_LITERAL,v:s}:(r.pos=i,null)):r.matchString("'")?(s=t(r),r.matchString("'")?{t:e.STRING_LITERAL,v:s}:(r.pos=i,null)):null}}(rt,at,ft),ct={name:/^[a-zA-Z_$][a-zA-Z_$0-9]*/},ht=function(e,t,n){var r=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;return function(i){var s;if(s=e(i))return r.test(s.v)?s.v:'"'+s.v.replace(/"/g,'\\"')+'"';if(s=t(i))return s.v;if(s=i.matchPattern(n.name))return s}}(lt,st,ct),pt=function(e,t){return function(n){var r,i,s;return r=n.pos,n.allowWhitespace(),i=t(n),i===null?(n.pos=r,null):(n.allowWhitespace(),n.matchString(":")?(n.allowWhitespace(),s=n.readExpression(),s===null?(n.pos=r,null):{t:e.KEY_VALUE_PAIR,k:i,v:s}):(n.pos=r,null))}}(rt,ht),dt=function(e){return function t(n){var r,i,s,o;return r=n.pos,s=e(n),s===null?null:(i=[s],n.matchString(",")?(o=t(n),o?i.concat(o):(n.pos=r,null)):i)}}(pt),vt=function(e,t){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.matchString("{")?(i=t(n),n.allowWhitespace(),n.matchString("}")?{t:e.OBJECT_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(rt,dt),mt=function(e){return function t(n){function u(e){i.push(e)}var r,i,s,o;return r=n.pos,n.allowWhitespace(),s=n.readExpression(),s===null?null:(i=[s],n.allowWhitespace(),n.matchString(",")&&(o=t(n),o===null&&n.error(e.expectedExpression),o.forEach(u)),i)}}(it),gt=function(e,t){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.matchString("[")?(i=t(n),n.matchString("]")?{t:e.ARRAY_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(rt,mt),yt=function(e,t,n,r,i){return function(s){var o=e(s)||t(s)||n(s)||r(s)||i(s);return o}}(st,ot,lt,vt,gt),bt=function(e,t){var n,r,i,s;return n=/^\.[a-zA-Z_$0-9]+/,i=function(e){var t=e.matchPattern(r);return t?"."+t:null},r=/^\[(0|[1-9][0-9]*)\]/,s=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,function(r){var o,u,a,f,l,c,h;o=r.pos,u="";while(r.matchString("../"))u+="../";u||(f=r.matchString(".")||""),a=r.matchPattern(/^@(?:index|key)/)||r.matchPattern(t.name)||"";if(!u&&!f&&s.test(a))return{t:e.GLOBAL,v:a};l=(u||f)+a;if(!l)return null;while(c=r.matchPattern(n)||i(r))l+=c;return r.matchString("(")&&(h=l.lastIndexOf("."),h!==-1?(l=l.substr(0,h),r.pos=o+l.length):r.pos-=1),{t:e.REFERENCE,n:l.replace(/^this\./,"./").replace(/^this$/,".")}}}(rt,ct),wt=function(e,t){return function(n){var r,i;return r=n.pos,n.matchString("(")?(n.allowWhitespace(),i=n.readExpression(),i||n.error(t.expectedExpression),n.allowWhitespace(),n.matchString(")")||n.error(t.expectedParen),{t:e.BRACKETED,x:i}):null}}(rt,it),Et=function(e,t,n){return function(r){return e(r)||t(r)||n(r)}}(yt,bt,wt),St=function(e,t,n){return function(i){var s,o,u;s=i.pos,i.allowWhitespace();if(i.matchString(".")){i.allowWhitespace();if(o=i.matchPattern(n.name))return{t:e.REFINEMENT,n:o};i.error("Expected a property name")}return i.matchString("[")?(i.allowWhitespace(),u=i.readExpression(),u||i.error(t.expectedExpression),i.allowWhitespace(),i.matchString("]")||i.error("Expected ']'"),{t:e.REFINEMENT,x:u}):null}}(rt,it,ct),xt=function(e,t,n,r,i){return function(s){var o,u,a,f;u=t(s);if(!u)return null;while(u){o=s.pos;if(a=r(s))u={t:e.MEMBER,x:u,r:a};else{if(!s.matchString("("))break;s.allowWhitespace(),f=n(s),s.allowWhitespace(),s.matchString(")")||s.error(i.expectedParen),u={t:e.INVOCATION,x:u},f&&(u.o=f)}}return u}}(rt,Et,mt,St,it),Tt=function(e,t,n){var r,i;return i=function(n,r){return function(i){var s;return i.matchString(n)?(i.allowWhitespace(),s=i.readExpression(),s||i.error(t.expectedExpression
),{s:n,o:s,t:e.PREFIX_OPERATOR}):r(i)}},function(){var e,t,s,o,u;o="! ~ + - typeof".split(" "),u=n;for(e=0,t=o.length;e<t;e+=1)s=i(o[e],u),u=s;r=u}(),r}(rt,it,xt),Nt=function(e,t){var n,r;return r=function(t,n){return function(r){var i,s,o;s=n(r);if(!s)return null;for(;;){i=r.pos,r.allowWhitespace();if(!r.matchString(t))return r.pos=i,s;if(t==="in"&&/[a-zA-Z_$0-9]/.test(r.remaining().charAt(0)))return r.pos=i,s;r.allowWhitespace(),o=n(r);if(!o)return r.pos=i,s;s={t:e.INFIX_OPERATOR,s:t,o:[s,o]}}}},function(){var e,i,s,o,u;o="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),u=t;for(e=0,i=o.length;e<i;e+=1)s=r(o[e],u),u=s;n=u}(),n}(rt,Tt),Ct=function(e,t,n){return function(r){var i,s,o,u;return s=t(r),s?(i=r.pos,r.allowWhitespace(),r.matchString("?")?(r.allowWhitespace(),o=r.readExpression(),o||r.error(n.expectedExpression),r.allowWhitespace(),r.matchString(":")||r.error('Expected ":"'),r.allowWhitespace(),u=r.readExpression(),u||r.error(n.expectedExpression),{t:e.CONDITIONAL,o:[s,o,u]}):(r.pos=i,s)):null}}(rt,Nt,it),kt=function(e,t){function n(e){return JSON.stringify(String(e))}function r(n,i){var s,o;n.t===e.REFERENCE&&i.indexOf(n.n)===-1&&i.unshift(n.n),o=n.o||n.m;if(o)if(t(o))r(o,i);else{s=o.length;while(s--)r(o[s],i)}n.x&&r(n.x,i),n.r&&r(n.r,i),n.v&&r(n.v,i)}function i(t,r,s){var o=function(e){return i(t,e,s)};switch(r.t){case e.BOOLEAN_LITERAL:case e.GLOBAL:case e.NUMBER_LITERAL:return r.v;case e.STRING_LITERAL:return n(r.v);case e.ARRAY_LITERAL:return"["+(r.m?r.m.map(o).join(","):"")+"]";case e.OBJECT_LITERAL:return"{"+(r.m?r.m.map(o).join(","):"")+"}";case e.KEY_VALUE_PAIR:return r.k+":"+i(t,r.v,s);case e.PREFIX_OPERATOR:return(r.s==="typeof"?"typeof ":r.s)+i(t,r.o,s);case e.INFIX_OPERATOR:return i(t,r.o[0],s)+(r.s.substr(0,2)==="in"?" "+r.s+" ":r.s)+i(t,r.o[1],s);case e.INVOCATION:return i(t,r.x,s)+"("+(r.o?r.o.map(o).join(","):"")+")";case e.BRACKETED:return"("+i(t,r.x,s)+")";case e.MEMBER:return i(t,r.x,s)+i(t,r.r,s);case e.REFINEMENT:return r.n?"."+r.n:"["+i(t,r.x,s)+"]";case e.CONDITIONAL:return i(t,r.o[0],s)+"?"+i(t,r.o[1],s)+":"+i(t,r.o[2],s);case e.REFERENCE:return"${"+s.indexOf(r.n)+"}";default:t.error("Expected legal JavaScript")}}return function(e){var t=[],n;return r(e,t),n={r:t,s:i(this,e,t)},n}}(rt,u),Lt=function(e,t,n,r,i){var s,o,u=/^\s+/;return o=function(e){this.name="ParseError",this.message=e},o.prototype=Error.prototype,s=function(e,t){var n,r;this.str=e,this.options=t||{},this.pos=0,this.init&&this.init(e,t),n=[];while(this.pos<this.str.length&&(r=this.read()))n.push(r);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,t):n},s.prototype={read:function(e){var t,n,r,i;e||(e=this.converters),t=this.pos,r=e.length;for(n=0;n<r;n+=1){this.pos=t;if(i=e[n](this))return i}return null},readExpression:function(){return r(this)},flattenExpression:i,getLinePos:function(){var e,t,n,r,i,s;e=this.str.split("\n"),i=-1,r=0;do n=r,i++,t=e[i],r+=t.length+1;while(r<=this.pos);return s=this.pos-n,{line:i+1,ch:s+1,text:t,toJSON:function(){return[this.line,this.ch]},toString:function(){return"line "+this.line+" character "+this.ch+":\n"+this.text+"\n"+this.text.substr(0,this.ch-1).replace(/[\S]/g," ")+"^----"}}},error:function(e){var t,n;throw t=this.getLinePos(),n=e+" at "+t,new o(n)},matchString:function(e){if(this.str.substr(this.pos,e.length)===e)return this.pos+=e.length,e},matchPattern:function(e){var t;if(t=e.exec(this.remaining()))return this.pos+=t[0].length,t[1]||t[0]},allowWhitespace:function(){this.matchPattern(u)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},s.extend=function(e){var r=this,i,o;i=function(e,t){s.call(this,e,t)},i.prototype=t(r.prototype);for(o in e)n.call(e,o)&&(i.prototype[o]=e[o]);return i.extend=s.extend,i},e.Parser=s,s}(i,U,s,Ct,kt),At=function(){var e=/^[^\s=]+/,t=/^\s+/;return function(n){var r,i,s;return n.matchString("=")?(r=n.pos,n.allowWhitespace(),i=n.matchPattern(e),i?n.matchPattern(t)?(s=n.matchPattern(e),s?(n.allowWhitespace(),n.matchString("=")?[i,s]:(n.pos=r,null)):(n.pos=r,null)):null:(n.pos=r,null)):null}}(),Ot=function(e){var t={"#":e.SECTION,"^":e.INVERTED,"/":e.CLOSING,">":e.PARTIAL,"!":e.COMMENT,"&":e.TRIPLE};return function(e){var n=t[e.str.charAt(e.pos)];return n?(e.pos+=1,n):null}}(rt),Mt=function(e,t){function u(t,n){var r=[],i;while(n.t===e.MEMBER&&n.r.t===e.REFINEMENT)i=n.r,i.x?i.x.t===e.REFERENCE?r.unshift(i.x):r.unshift(t.flattenExpression(i.x)):r.unshift(i.n),n=n.x;return n.t!==e.REFERENCE?null:{r:n.n,m:r}}var n=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,r=/^[0-9][1-9]*$/,i=/(if|unless|with|each|try)\b/,s,o;return s={"if":e.SECTION_IF,unless:e.SECTION_UNLESS,"with":e.SECTION_WITH,each:e.SECTION_EACH},o=/^[a-zA_Z$_0-9]+(?:(\.[a-zA_Z$_0-9]+)|(\[[a-zA_Z$_0-9]+\]))*$/,function(a,f){var l,c,h,p,d,v,m,g,y,b,w;l=a.pos,h={};if(f)h.t=e.TRIPLE;else{if(v=a.readExpression())h.t=e.INTERPOLATOR,a.allowWhitespace(),a.matchString(a.delimiters[1])?a.pos-=a.delimiters[1].length:(a.pos=l,v=null);if(!v){p=t(a),h.t=p||e.INTERPOLATOR;if(p===e.SECTION&&a.handlebars)d=a.matchPattern(i),d&&s[d]&&(h.n=s[d],a.allowWhitespace());else if(p===e.INVERTED)h.t=e.SECTION,h.n=e.SECTION_UNLESS;else if(p===e.COMMENT||p===e.CLOSING){g=a.remaining(),y=g.indexOf(a.delimiters[1]);if(y!==-1)return h.r=g.substr(0,y),a.pos+=y,h}}}if(!v){a.allowWhitespace(),v=a.readExpression(),g=a.remaining(),b=f?a.tripleDelimiters[1]:a.delimiters[1];if(g.substr(0,b.length)!==b&&g.charAt(0)!==":"){c=a.pos,a.pos=l,g=a.remaining(),y=g.indexOf(a.delimiters[1]);if(y!==-1)return h.r=g.substr(0,y).trim(),o.test(h.r)||a.error("Expected a legal Mustache reference"),a.pos+=y,h;a.pos=c}}if(v){while(v.t===e.BRACKETED&&v.x)v=v.x;v.t===e.REFERENCE?h.r=v.n:v.t===e.NUMBER_LITERAL&&r.test(v.v)?h.r=v.v:(w=u(a,v))?h.rx=w:h.x=a.flattenExpression(v)}if(m=a.matchPattern(n))h.i=m;return h}}(rt,Ot),_t=function(e,t,n){function s(e){var t=e.tripleDelimiters[0].length>e.delimiters[0].length
;return o(e,t)||o(e,!t)}function o(i,s){var o,a,f,l,c,h,p,d,v,m;o=i.pos,a=i.getLinePos(),l=s?i.tripleDelimiters:i.delimiters;if(!i.matchString(l[0]))return null;if(f=t(i))return i.matchString(l[1])?(i[s?"tripleDelimiters":"delimiters"]=f,r):null;i.allowWhitespace(),f=n(i,s);if(f===null)return i.pos=o,null;i.allowWhitespace(),i.matchString(l[1])||i.error("Expected closing delimiter '"+l[1]+"' after reference"),f.t===e.COMMENT&&(f.exclude=!0);if(f.t===e.SECTION){c=[],d=c;if(i.options.strict||i.handlebars)switch(f.n){case e.SECTION_IF:h="if";break;case e.SECTION_EACH:h="each";break;case e.SECTION_UNLESS:h="unless";break;case e.SECTION_WITH:h="with"}while(v=i.read()){if(v.t===e.CLOSING){h&&v.r!==h&&i.error("Expected {{/"+h+"}}");break}if(i.handlebars&&v.t===e.INTERPOLATOR&&v.r==="else")switch(f.n){case e.SECTION_IF:case e.SECTION_EACH:d=p=[];continue;case e.SECTION_UNLESS:i.error("{{else}} not allowed in {{#unless}}");break;case e.SECTION_WITH:i.error("{{else}} not allowed in {{#with}}")}d.push(v)}c.length&&(f.f=c,!f.i&&f.n===e.SECTION_EACH&&(m=u(f.f))&&(f.i=m)),p&&p.length&&(f.l=p)}return i.includeLinePositions&&(f.p=a.toJSON()),f}function u(t){var n,r,s;n=t.length;while(n--){r=t[n];if(r.t===e.ELEMENT&&r.f&&(s=u(r.f)))return s;if(r.t===e.INTERPOLATOR||r.t===e.TRIPLE||r.t===e.SECTION){if(r.r&&i.test(r.r))return r.r;if(r.x&&(s=a(r.x)))return s;if(r.rx&&(s=f(r.rx)))return s}}}function a(e){var t;t=e.r.length;while(t--)if(i.test(e.r[t]))return e.r[t]}function f(t){var n,r,s;n=t.m.length;while(n--){s=t.m[n];if(s.r&&(r=a(s)))return r;if(s.t===e.REFERENCE&&i.test(s.n))return s.n}}var r={t:e.DELIMCHANGE,exclude:!0},i=/^@(?:index|key)$/;return s}(rt,At,Mt),Dt=function(e){var t="<!--",n="-->";return function(r){var i,s,o,u,a;return i=r.getLinePos(),r.matchString(t)?(o=r.remaining(),u=o.indexOf(n),u===-1&&r.error("Illegal HTML - expected closing comment sequence ('-->')"),s=o.substr(0,u),r.pos+=u+3,a={t:e.COMMENT,c:s},r.includeLinePositions&&(a.p=i.toJSON()),a):null}}(rt),Pt=function(){var e=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;return e}(),Ht=function(e,t){var n,r,i;n=t.length;while(n--){r=e.indexOf(t[n]);if(!r)return 0;if(r===-1)continue;if(!i||r<i)i=r}return i||-1},Bt=function(){function s(e){return e?e===10?32:e<128?e:e<=159?t[e-128]:e<55296?e:e<=57343?65533:e<=65535?e:65533:65533}var e,t,n,r,i;return e={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},t=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],n=new RegExp("&("+Object.keys(e).join("|")+");?","g"),r=/&#x([0-9]+);?/g,i=/&#([0-9]+);?/g,function(o){var u;return u=o.replace(n,function(t,n){return e[n]?String.fromCharCode(e[n]):t}),u=u.replace(r,function(e,t){return String.fromCharCode(s(parseInt(t,16)))}),u=u.replace(i,function(e,t){return String.fromCharCode(s(t))}),u}}(),jt=function(e,t){return function(n){var r,i,s;return i=n.remaining(),s=n.inside?"</"+n.inside:"<",n.inside&&!n.interpolate[n.inside]?r=i.indexOf(s):r=e(i,[s,n.delimiters[0],n.tripleDelimiters[0]]),r?(r===-1&&(r=i.length),n.pos+=r,t(i.substr(0,r))):null}}(Ht,Bt),Ft=function(e){var t=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;return function(n){var r;if(!n.matchString("</"))return null;if(r=n.matchPattern(t))return{t:e.CLOSING_TAG,e:r};n.pos-=2,n.error("Illegal closing tag")}}(rt),It=function(e,t){function i(e){var t,r,i;return e.allowWhitespace(),r=e.matchPattern(n),r?(t={name:r},i=s(e),i&&(t.value=
i),t):null}function s(e){var t,n;return t=e.pos,e.allowWhitespace(),e.matchString("=")?(e.allowWhitespace(),n=a(e,"'")||a(e,'"')||u(e),n===null?(e.pos=t,null):n.length===1&&typeof n[0]=="string"?n[0]:n):(e.pos=t,null)}function o(e){var t,n,i;return t=e.pos,n=e.matchPattern(r),n?((i=n.indexOf(e.delimiters[0]))!==-1&&(n=n.substr(0,i),e.pos=t+n.length),n):null}function u(e){var n,r;n=[],r=t(e)||o(e);while(r!==null)n.push(r),r=t(e)||o(e);return n.length?n:null}function a(e,n){var r,i,s;r=e.pos;if(!e.matchString(n))return null;i=[],s=t(e)||f(e,n);while(s!==null)i.push(s),s=t(e)||f(e,n);return e.matchString(n)?i:(e.pos=r,null)}function f(t,n){var r,i,s;return r=t.pos,s=t.remaining(),i=e(s,[n,t.delimiters[0],t.delimiters[1]]),i===-1&&t.error("Quoted attribute value must have a closing quote"),i?(t.pos+=i,s.substr(0,i)):null}var n=/^[^\s"'>\/=]+/,r=/^[^\s"'=<>`]+/;return i}(Ht,_t),qt=function(e,t,n){function l(e){var t,r,i;return e.allowWhitespace(),t=n(e),t?(i={key:t},e.allowWhitespace(),e.matchString(":")?(e.allowWhitespace(),r=e.read(),r?(i.value=r.v,i):null):null):null}var r,i,s,o,u,a,f;return i={"true":!0,"false":!1,"undefined":undefined,"null":null},s=new RegExp("^(?:"+Object.keys(i).join("|")+")"),o=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,u=/\$\{([^\}]+)\}/g,a=/^\$\{([^\}]+)\}/,f=/^\s*$/,r=e.extend({init:function(e,t){this.values=t.values},postProcess:function(e){return e.length!==1||!f.test(this.leftover)?null:{value:e[0].v}},converters:[function(t){var n;if(!t.values)return null;n=t.matchPattern(a);if(n&&t.values.hasOwnProperty(n))return{v:t.values[n]}},function(t){var n;if(n=t.matchPattern(s))return{v:i[n]}},function(t){var n;if(n=t.matchPattern(o))return{v:+n}},function(n){var r=t(n),i;return r&&(i=n.values)?{v:r.v.replace(u,function(e,t){return t in i?i[t]:t})}:r},function(t){var n,r;if(!t.matchString("{"))return null;n={};while(r=l(t)){n[r.key]=r.value,t.allowWhitespace();if(t.matchString("}"))return{v:n};if(!t.matchString(","))return null}return null},function(t){var n,r;if(!t.matchString("["))return null;n=[],t.allowWhitespace();while(r=t.read()){n.push(r.v),t.allowWhitespace();if(t.matchString("]"))return{v:n};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]}),function(e,t){var n=new r(e,{values:t});return n.result}}(Lt,lt,ht),Rt=function(e){return function(t){var n,r,i,s,o,u;if(typeof t=="string"){if(t.indexOf(":")===-1)return t.trim();t=[t]}n={},s=[],o=[];while(t.length){r=t.shift();if(typeof r=="string"){i=r.indexOf(":");if(i!==-1){i&&s.push(r.substr(0,i)),r.length>i+1&&(o[0]=r.substring(i+1));break}s.push(r)}else s.push(r)}return o=o.concat(t),o.length||typeof s!="string"?(n={n:s.length===1&&typeof s[0]=="string"?s[0]:s},o.length===1&&typeof o[0]=="string"?(u=e("["+o[0]+"]"),n.a=u?u.value:o[0]):n.d=o):n=s,n}}(qt),Ut=function(e,t,n,r,i,s,o,u){function m(n){var r,i,s,m,g,y,b,w,E,S,x,T;r=n.pos,i=n.getLinePos();if(n.inside)return null;if(!n.matchString("<"))return null;if(n.nextChar()==="/")return null;s={t:e.ELEMENT},n.includeLinePositions&&(s.p=i.toJSON()),n.matchString("!")&&(s.y=1),s.e=n.matchPattern(a);if(!s.e)return null;f.test(n.nextChar())||n.error("Illegal tag name"),b=function(e,t){var r=t.n||t;h.test(r)&&(n.pos-=r.length,n.error("Cannot use reserved event names (change, reset, teardown, update)")),s.v[e]=t};while(w=o(n))if(g=p[w.name])s[g]=u(w.value);else if(y=c.exec(w.name))s.v||(s.v={}),E=u(w.value),b(y[1],E);else if(!n.sanitizeEventAttributes||!l.test(w.name))s.a||(s.a={}),s.a[w.name]=w.value||0;n.allowWhitespace(),n.matchString("/")&&(S=!0);if(!n.matchString(">"))return null;m=s.e.toLowerCase();if(!S&&!t.test(s.e)){if(m==="script"||m==="style")n.inside=m;x=[];while(T=n.read(v)){if(T.t===e.CLOSING)break;if(T.t===e.CLOSING_TAG)break;x.push(T)}x.length&&(s.f=x)}return n.inside=null,n.sanitizeElements&&n.sanitizeElements.indexOf(m)!==-1?d:s}var a=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,f=/^[\s\n\/>]/,l=/^on/,c=/^on-([a-zA-Z$_][a-zA-Z$_0-9\-]+)$/,h=/^(?:change|reset|teardown|update)$/,p={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},d={exclude:!0},v;return v=[n,r,m,i,s],m}(rt,Pt,_t,Dt,jt,Ft,It,Rt),zt=function(){var e=/^[ \t\f\r\n]+/,t=/[ \t\f\r\n]+$/;return function(n,r,i){var s;r&&(s=n[0],typeof s=="string"&&(s=s.replace(e,""),s?n[0]=s:n.shift())),i&&(s=n[n.length-1],typeof s=="string"&&(s=s.replace(t,""),s?n[n.length-1]=s:n.pop()))}}(),Wt=function(e){function r(e){return typeof e=="string"}function i(t){return t.t===e.COMMENT||t.t===e.DELIMCHANGE}function s(t){return(t.t===e.SECTION||t.t===e.INVERTED)&&t.f}var t=/^\s*\r?\n/,n=/\r?\n\s*$/;return function(e){var o,u,a,f,l;for(o=1;o<e.length;o+=1)u=e[o],a=e[o-1],f=e[o-2],r(u)&&i(a)&&r(f)&&n.test(f)&&t.test(u)&&(e[o-2]=f.replace(n,"\n"),e[o]=u.replace(t,"")),s(u)&&r(a)&&n.test(a)&&r(u.f[0])&&t.test(u.f[0])&&(e[o-1]=a.replace(n,"\n"),u.f[0]=u.f[0].replace(t,"")),r(u)&&s(a)&&(l=a.f[a.f.length-1],r(l)&&n.test(l)&&t.test(u)&&(a.f[a.f.length-1]=l.replace(n,"\n"),e[o]=u.replace(t,"")));return e}}(rt),Xt=function(e,t,n,r,i,s,o,u){function g(t,n,r,i,s,a){var f,c,h,m,y,b,w,E,S;u(t),f=t.length;while(f--)c=t[f],c.exclude?t.splice(f,1):n&&c.t===e.COMMENT&&t.splice(f,1);o(t,i,s),f=t.length;while(f--){c=t[f];if(c.f){y=r||c.t===e.ELEMENT&&p.test(c.e);if(!y){h=t[f-1],m=t[f+1];if(!h||typeof h=="string"&&v.test(h))b=!0;if(!m||typeof m=="string"&&d.test(m))w=!0}g(c.f,n,y,b,w,a),c.l&&(g(c.l,n,r,b,w,a),a&&(E={t:4,r:c.r,n:e.SECTION_UNLESS,f:c.l},t.splice(f+1,0,E),delete c.l))}if(c.a)for(S in c.a)c.a.hasOwnProperty(S)&&typeof c.a[S]!="string"&&g(c.a[S],n,r,a)}f=t.length;while(f--)typeof t[f]=="string"&&(typeof t[f+1]=="string"&&(t[f]=t[f]+t[f+1],t.splice(f+1,1)),r||(t[f]=t[f].replace(l," ")),t[f]===""&&t.splice(f,1))}var a,f,l=/[ \t\f\r\n]+/g,c=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,h=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,p=/^(?:pre|script|style|textarea)$/i,d=/^\s+/,v=/\s+$/,m;return a=t.extend({init:function(e,t){this.delimiters=
t.delimiters||["{{","}}"],this.tripleDelimiters=t.tripleDelimiters||["{{{","}}}"],this.interpolate={script:!t.interpolate||t.interpolate.script!==!1,style:!t.interpolate||t.interpolate.style!==!1},t.sanitize===!0&&(t.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.sanitizeElements=t.sanitize&&t.sanitize.elements,this.sanitizeEventAttributes=t.sanitize&&t.sanitize.eventAttributes,this.includeLinePositions=t.includeLinePositions,this.handlebars=t.handlebars},postProcess:function(e,t){return g(e,t.stripComments!==!1,t.preserveWhitespace,!t.preserveWhitespace,!t.preserveWhitespace,t.rewriteElse!==!1),e},converters:[n,r,i,s]}),f=function(e,t){var n;return t=t||{},c.test(e)?m(e,t):(n=new a(e,t),n.leftover&&n.error("Unexpected character"),n.result)},m=function(e,t){var n,r,i,s,o,u;i={},n="",r=e;while(o=c.exec(r)){s=o[1],n+=r.substr(0,o.index),r=r.substring(o.index+o[0].length),u=h.exec(r);if(!u||u[1]!==s)throw new Error("Inline partials must have a closing delimiter, and cannot be nested");i[s]=f(r.substr(0,u.index),t),r=r.substring(u.index+u[0].length)}return{main:f(n,t),partials:i}},f}(rt,Lt,_t,Dt,Ut,jt,zt,Wt),Vt=function(e,t,n,r){function s(e){var t=r(i);return t.parse=function(t,n){return o(t,n||e)},t}function o(t,r){if(!n)throw new Error(e.missingParser);return n(t,r||this.options)}function u(e,n){var r;if(!t){if(n&&n.noThrow)return;throw new Error("Cannot retieve template #"+e+"as Ractive is not running in the client.")}a(e)&&(e=e.substring(1));if(!(r=document.getElementById(e))){if(n&&n.noThrow)return;throw new Error("Could not find template element with id #"+e)}return r.innerHTML}function a(e){return e.charAt(0)==="#"}function f(e){return typeof e!="string"}var i={parse:o,fromId:u,isHashedId:a,isParsed:f,createHelper:s};return i}(nt,p,Xt,U),$t=function(t,n){var r=t.map(n);return t.forEach(function(e,t){r[e]=r[t]}),r},Jt=function(e){return function(n){var r=e(n);return r.postInit=function(e,t){e.parseOptions[n]=t},r}}(I),Kt=function(e,t){var n,r;return n=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","handlebars"],r=e(n,function(e){return t(e)}),r}($t,Jt),Qt=function(e,t,n,r){function s(e,t,n){return typeof n=="undefined"&&(n=t),n}function o(e,t,n){var r=s(e,t,n);if(typeof r=="function"){var i=r;r=u(e,i),e._config[this.name]={fn:i,result:r}}return r}function u(e,n){var r=t.createHelper(f(e));return n.call(e,e.data,r)}function a(e){var t=e._config.template,n;if(!t||!t.fn)return;n=u(e,t.fn);if(n!==t.result)return t.result=n,n}function f(e){if(e.parseOptions)return e.parseOptions;var t=e.defaults;if(!t)return;return r.reduce(function(e,n){return e[n.name]=t[n.name],e},{})}function l(e,n){return n?(t.isParsed(n)||(t.isHashedId(n)&&(n=t.fromId(n)),n=t.parse(n,f(e))),n=c(e,n),n&&n.length===1&&typeof n[0]=="string"&&(n=n[0]),n):n}function c(e,t){if(!n(t))return t;e.partials=e.partials||{};for(var r in t.partials)e.partials[r]=t.partials[r];return t.main}var i=e({name:"template",useDefaults:!0,defaultValue:"",extendValue:s,postExtend:l,initValue:o,postInit:l,resetValue:a,processCompound:c});return i}(F,Vt,u,Kt),Gt=function(e){function n(e,t){return i(e.defaults,t)}function r(e,t){return i(e,t)}function i(e,t){var n,r=e.adapt;if(!r||!r.length)return t;if(t&&Object.keys(t).length&&(n=r.length))while(n--){var i=r[n];typeof i=="string"&&(r[n]=t[i]||i)}return e.adapt=r,t}var t=e({name:"adaptors",postExtend:n,postInit:r});return t}(Q),Yt=function(e,t){function i(e,n){if(n.eventDefinitions){if(!!n.events)throw new Error(r+" You cannot specify both options, please use ractive.events.");t(r+" Support will be removed in future versions."),n.events=n.eventDefinitions}}var n=e({name:"events",preExtend:i,preInit:i}),r="ractive.eventDefinitions has been deprecated in favour of ractive.events. ";return n}(Q,H),Zt=function(e,t,n,r){var i,s,o;return i=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],s={adaptors:n,events:r},o=e(i,function(e){return s[e]||t({name:e})}),o}($t,Q,Gt,Yt),en=function(e,t,n,r,i,s,o,u,a,f,l,c){var h,p,d;return h={data:r,debug:i,complete:o,computed:a,adapt:e,magic:u,template:f,css:n},p=Object.keys(s).filter(function(e){return!c[e]&&!h[e]&&!l[e]}).map(t),d=[].concat(h.debug,h.data,l,p,h.adapt,h.magic,h.complete,h.computed,c,h.template,h.css),d.keys=d.map(function(e){return e.name}),d.keys.forEach(function(e,t){d[e]=d[t],d.keys[e]=!0}),d.parseOptions=l,d.registries=c,d.extend=function(e,t,n){d.forEach(function(r){r.extend(e,t,n)})},d.init=function(e,t,n){d.forEach(function(r){r.init(e,t,n),n[r.name]=t[r.name],t._config&&(t._config.options=n)})},d.reset=function(e){return d.filter(function(t){return t.reset&&t.reset(e)})},d}(B,I,R,W,X,n,V,$,tt,Qt,Kt,Zt),tn=function(e,t,n,r){function s(e){return function(){return e}}var i=function(e,i,o,u){if(e===i)return s(i);if(u){var a=r.registries.interpolators.find(o,u);if(a)return a(e,i)||s(i);t('Missing "'+u+'" interpolator. You may need to download a plugin from [TODO]')}return n.number(e,i)||n.array(e,i)||n.object(e,i)||n.cssLength(e,i)||s(i)};return e.interpolate=i,i}(i,H,f,en),nn=function(e,t,n){var r=function(e){var t;this.startTime=Date.now();for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.interpolator=n(this.from,this.to,this.root,this.interpolator),this.running=!0};return r.prototype={tick:function(){var n,r,i,s,o,u;return u=this.keypath,this.running?(s=Date.now(),n=s-this.startTime,n>=this.duration?(u!==null&&(t.start(this.root),this.root.viewmodel.set(u,this.to),t.end()),this.step&&this.step(1,this.to),this.complete(this.to),o=this.root._animations.indexOf(this),o===-1&&e("Animation was not found"),this.root._animations.splice(o,1),this.running=!1,!1):(r=this.easing?this.easing(n/this.duration):n/this.duration,u!==null&&(i=this.interpolator(r),t.start(this.root),this.root.viewmodel.set(u,i),t.end()),this.step&&this.step(r,i),!0)):!1
},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),t===-1&&e("Animation was not found"),this.root._animations.splice(t,1)}},r}(H,D,tn),rn=function(e,t,n,r,i){function u(t,s,u,a){var f,l,c,h;return s&&(s=n(s)),s!==null&&(h=t.viewmodel.get(s)),r.abort(s,t),e(h,u)?(a.complete&&a.complete(a.to),o):(a.easing&&(typeof a.easing=="function"?f=a.easing:f=t.easing[a.easing],typeof f!="function"&&(f=null)),l=a.duration===undefined?400:a.duration,c=new i({keypath:s,from:h,to:u,root:t,duration:l,easing:f,interpolator:a.interpolator,step:a.step,complete:a.complete}),r.add(c),t._animations.push(c),c)}var s=function(){},o={stop:s};return function(n,r,i){var o,a,f,l,c,h,p,d,v,m,g,y,b,w;o=new t(function(e){a=e});if(typeof n=="object"){i=r||{},h=i.easing,p=i.duration,c=[],d=i.step,v=i.complete;if(d||v)g={},i.step=null,i.complete=null,m=function(e){return function(t,n){g[e]=n}};for(f in n)if(n.hasOwnProperty(f)){if(d||v)y=m(f),i={easing:h,duration:p},d&&(i.step=y);i.complete=v?y:s,c.push(u(this,f,n[f],i))}if(d||v)w={easing:h,duration:p},d&&(w.step=function(e){d(e,g)}),v&&o.then(function(e){v(e,g)}),w.complete=a,b=u(this,null,null,w),c.push(b);return{stop:function(){var e;while(e=c.pop())e.stop();b&&b.stop()}}}return i=i||{},i.complete&&o.then(i.complete),i.complete=a,l=u(this,n,r,i),o.stop=function(){l.stop()},o}}(y,b,w,P,nn),sn=function(e){return function(){return this.el&&e(this.el.__ractive_instances__,this),this.fragment.detach()}}(T),on=function(t){return this.el?this.fragment.find(t):null},un=function(e,t,n){var r,i,s,o,u,a,f,l;if(!e)r=null;else{i=n("div"),s=["matches","matchesSelector"],l=function(e){return function(t,n){return t[e](n)}},a=s.length;while(a--&&!r){o=s[a];if(i[o])r=l(o);else{f=t.length;while(f--){u=t[a]+o.substr(0,1).toUpperCase()+o.substring(1);if(i[u]){r=l(u);break}}}}r||(r=function(e,t){var n,r,s;r=e.parentNode,r||(i.innerHTML="",r=i,e=e.cloneNode(),i.appendChild(e)),n=r.querySelectorAll(t),s=n.length;while(s--)if(n[s]===e)return!0;return!1})}return r}(p,E,h),an=function(e){return function(t,n){var r=this._isComponentQuery?!this.selector||t.name===this.selector:e(t.node,this.selector);if(r)return this.push(t.node||t.instance),n||this._makeDirty(),!0}}(un),fn=function(){var e,t,n;e=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],t=this.selector,n=e.indexOf(t),n!==-1&&(e.splice(n,1),e[t]=null)},ln=function(){function e(e){var t;if(t=e.parentFragment)return t.owner;if(e.component&&(t=e.component.parentFragment))return t.owner}function t(t){var n,r;n=[t],r=e(t);while(r)n.push(r),r=e(r);return n}return function(e,n){var r,i,s,o,u,a,f,l,c,h;r=t(e.component||e._ractive.proxy),i=t(n.component||n._ractive.proxy),s=r[r.length-1],o=i[i.length-1];while(s&&s===o)r.pop(),i.pop(),u=s,s=r[r.length-1],o=i[i.length-1];s=s.component||s,o=o.component||o,c=s.parentFragment,h=o.parentFragment;if(c===h)return a=c.items.indexOf(s),f=h.items.indexOf(o),a-f||r.length-i.length;if(l=u.fragments)return a=l.indexOf(c),f=l.indexOf(h),a-f||r.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")}}(),cn=function(e){return function(t,n){var r;return t.compareDocumentPosition?(r=t.compareDocumentPosition(n),r&2?1:-1):e(t,n)}}(ln),hn=function(e,t){return function(){this.sort(this._isComponentQuery?t:e),this._dirty=!1}}(cn,ln),pn=function(e){return function(){var t=this;this._dirty||(this._dirty=!0,e.afterViewUpdate(function(){t._sort()}))}}(D),dn=function(e){var t=this.indexOf(this._isComponentQuery?e.instance:e);t!==-1&&this.splice(t,1)},vn=function(e,t,n,r,i,s){return function(u,a,f,l){var c=[];return e(c,{selector:{value:a},live:{value:f},_isComponentQuery:{value:l},_test:{value:t}}),f?(e(c,{cancel:{value:n},_root:{value:u},_sort:{value:r},_makeDirty:{value:i},_remove:{value:s},_dirty:{value:!1,writable:!0}}),c):c}}(v,an,fn,hn,pn,dn),mn=function(e){return function(n,r){var i,s;return this.el?(r=r||{},i=this._liveQueries,(s=i[n])?r&&r.live?s:s.slice():(s=e(this,n,!!r.live,!1),s.live&&(i.push(n),i["_"+n]=s),this.fragment.findAll(n,s),s)):[]}}(vn),gn=function(e){return function(n,r){var i,s;return r=r||{},i=this._liveComponentQueries,(s=i[n])?r&&r.live?s:s.slice():(s=e(this,n,!!r.live,!0),s.live&&(i.push(n),i["_"+n]=s),this.fragment.findAllComponents(n,s),s)}}(vn),yn=function(t){return this.fragment.findComponent(t)},bn=function(t){var n,r,i,s=this._subs[t];if(!s)return;n=Array.prototype.slice.call(arguments,1);for(r=0,i=s.length;r<i;r+=1)s[r].apply(this,n)},wn=function(e){var t={capture:!0};return function(r){return r=e(r),this.viewmodel.get(r,t)}}(w),En=function(t){var n;if(!t||typeof t=="boolean")return;if(typeof window=="undefined"||!document||!t)return null;if(t.nodeType)return t;if(typeof t=="string"){n=document.getElementById(t),!n&&document.querySelector&&(n=document.querySelector(t));if(n&&n.nodeType)return n}return t[0]&&t[0].nodeType?t[0]:null},Sn=function(e){return function(n,r){if(!this.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");n=e(n),r=e(r)||null;if(!n)throw new Error("You must specify a valid target to insert into");n.insertBefore(this.detach(),r),this.el=n,(n.__ractive_instances__||(n.__ractive_instances__=[])).push(this)}}(En),xn=function(e,t){var n,r,i,s;return n={},r=0,i=e.map(function(e,i){var o,u,a;u=r,a=t.length;do{o=t.indexOf(e,u);if(o===-1)return s=!0,-1;u=o+1}while(n[o]&&u<a);return o===r&&(r+=1),o!==i&&(s=!0),n[o]=!0,o}),i.unchanged=!s,i},Tn=function(e,t){return function(n,r,i,s){var o;n.viewmodel.changes.push(r),o=function(t){t.type===e.REFERENCE?t.update():t.keypath===r&&t.type===e.SECTION&&!t.inverted&&t.docFrag?t.merge(i):t.update()},n.viewmodel.deps.forEach(function(e){var t=e[r];t&&t.forEach(o)}),s||t(n,r+".length",!0)}}(rt,M),Nn=function(e,t,n,r,i,s){function u(e){return JSON
.stringify(e)}function a(e){if(e===!0)return u;if(typeof e=="string")return o[e]||(o[e]=function(t){return t[e]}),o[e];if(typeof e=="function")return e;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}var o={};return function(u,f,l){var c,h,p,d,v,m,g,y;c=this.get(u);if(!n(c)||!n(f))return this.set(u,f,l&&l.complete);v=c.length===f.length;if(l&&l.compare){d=a(l.compare);try{h=c.map(d),p=f.map(d)}catch(b){if(this.debug)throw b;t("Merge operation: comparison failed. Falling back to identity checking"),h=c,p=f}}else h=c,p=f;return m=i(h,p),g=new r(function(e){y=e}),e.start(this,y),this.viewmodel.set(u,f,!0),s(this,u,m,v),e.end(),l&&l.complete&&g.then(l.complete),g}}(D,H,o,b,xn,Tn),Cn=function(e,t){var n=function(e,t,n,r){this.root=e,this.keypath=t,this.callback=n,this.defer=r.defer,this.debug=r.debug,this.priority=0,this.context=r&&r.context?r.context:e};return n.prototype={init:function(e){this.value=this.root.viewmodel.get(this.keypath),e!==!1&&this.update()},setValue:function(n){var r=this;t(n,this.oldValue)||(this.value=n,this.defer&&this.ready?e.afterViewUpdate(function(){return r.update()}):e.afterModelUpdate(function(){return r.update()}))},update:function(){if(this.updating)return;this.updating=!0;try{this.callback.call(this.context,this.value,this.oldValue,this.keypath)}catch(e){if(this.debug||this.root.debug)throw e}this.oldValue=this.value,this.updating=!1}},n}(D,y),kn=function(e){return function(n,r){function u(t,r){var i,s,o;i=n.viewmodel.wrapped[r]?n.viewmodel.wrapped[r].get():n.get(r);for(s in i)i.hasOwnProperty(s)&&(s!=="_ractive"||!e(i))&&(o=r?r+"."+s:s,t.push(o));return t}function a(e){return function(t){return t?t+"."+e:e}}var i,s,o;i=r.split("."),o=[""];while(s=i.shift())s==="*"?o=o.reduce(u,[]):o[0]===""?o[0]=s:o=o.map(a(s));return o}}(o),Ln=function(e){return function(n,r){var i,s;return i=e(n,r),s={},i.forEach(function(e){s[e]=n.get(e)}),s}}(kn),An=function(e,t,n,r){var i,s=/\*/,o=Array.prototype.slice;return i=function(e,t,n,r){this.root=e,this.callback=n,this.defer=r.defer,this.debug=r.debug,this.keypath=t,this.regex=new RegExp("^"+t.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.priority="pattern",this.context=r&&r.context?r.context:e},i.prototype={init:function(e){var t,n;t=r(this.root,this.keypath);if(e!==!1)for(n in t)t.hasOwnProperty(n)&&this.update(n);else this.values=t},update:function(t){var i,o;if(s.test(t)){i=r(this.root,t);for(t in i)i.hasOwnProperty(t)&&this.update(t);return}if(t.substr(-7)===".length"){o=this.root.viewmodel.get(t.substr(0,t.length-7));if(n(o)&&o._ractive&&o._ractive.setting)return}if(this.defer&&this.ready){e.addObserver(this.getProxy(t));return}this.reallyUpdate(t)},reallyUpdate:function(e){var n,r,i;n=this.root.viewmodel.get(e);if(this.updating){this.values[e]=n;return}this.updating=!0;if(!t(n,this.values[e])||!this.ready){r=o.call(this.regex.exec(e),1),i=[n,this.values[e],e].concat(r);try{this.callback.apply(this.context,i)}catch(s){if(this.debug||this.root.debug)throw s}this.values[e]=n}this.updating=!1},getProxy:function(e){var t=this;return this.proxies[e]||(this.proxies[e]={update:function(){t.reallyUpdate(e)}}),this.proxies[e]}},i}(D,y,o,Ln),On=function(e,t,n){var r=/\*/,i={};return function(o,u,a,f){var l,c;return u=e(u),f=f||i,r.test(u)?(l=new n(o,u,a,f),o._patternObservers.push(l),c=!0):l=new t(o,u,a,f),o.viewmodel.register(l),l.init(f.init),l.ready=!0,{cancel:function(){var e;c&&(e=o._patternObservers.indexOf(l),e!==-1&&o._patternObservers.splice(e,1)),o.viewmodel.unregister(l)}}}}(w,Cn,An),Mn=function(e,t){return function(r,i,s){var o,u,a,f;if(e(r)){s=i,u=r,o=[];for(r in u)u.hasOwnProperty(r)&&(i=u[r],o.push(this.observe(r,i,s)));return{cancel:function(){while(o.length)o.pop().cancel()}}}if(typeof r=="function")return s=i,i=r,r="",t(this,r,i,s);a=r.split(" ");if(a.length===1)return t(this,r,i,s);o=[],f=a.length;while(f--)r=a[f],r&&o.push(t(this,r,i,s));return{cancel:function(){while(o.length)o.pop().cancel()}}}}(u,On),_n=function(e){return e.trim()},Dn=function(e){return e!==""},Pn=function(e,t){return function(r,i){var s=this,o;if(!r){for(r in this._subs)delete this._subs[r];return}o=r.split(" ").map(e).filter(t),o.forEach(function(e){var t,n;if(t=s._subs[e])i?(n=t.indexOf(i),n!==-1&&t.splice(n,1)):s._subs[e]=[]})}}(_n,Dn),Hn=function(e,t){return function(r,i){var s=this,o=this,u,a,f;if(typeof r=="object"){u=[];for(a in r)r.hasOwnProperty(a)&&u.push(this.on(a,r[a]));return{cancel:function(){var e;while(e=u.pop())e.cancel()}}}return f=r.split(" ").map(e).filter(t),f.forEach(function(e){(s._subs[e]||(s._subs[e]=[])).push(i)}),{cancel:function(){o.off(r,i)}}}}(_n,Dn),Bn=function(e,t,n,r){function i(e){e.init&&e.init(e._config.options),e._childInitQueue.splice(0).forEach(i)}return function(o,u){var a,f,l;this._rendering=!0,a=new n(function(e){f=e}),e.start(this,f);if(this.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");return o=r(o)||this.el,u=r(u)||this.anchor,this.el=o,this.anchor=u,this.constructor.css&&t.add(this.constructor),o&&((l=o.__ractive_instances__)?l.push(this):o.__ractive_instances__=[this],u?o.insertBefore(this.fragment.render(),u):o.appendChild(this.fragment.render())),!this._parent||!this._parent._rendering?i(this):this._parent._childInitQueue.push(this),delete this._rendering,e.end(),this.rendered=!0,a}}(D,N,b,En),jn=function(){this.dirtyValue=this.dirtyArgs=!0,this.inited&&this.owner.bubble&&this.owner.bubble()},Fn=function(){var t;return this.items.length===1?this.items[0].detach():(t=document.createDocumentFragment(),this.items.forEach(function(e){t.appendChild(e.detach())}),t)},In=function(e){return function(n){var r,i,s,o,u;if(this.nodes){i=this.nodes.length;for(r=0;r<i;r+=1){o=this.nodes[r];if(o.nodeType!==1)continue;if(e(o,n))return o;if(u=o.querySelector(n))return u}return null}if(this
.items){i=this.items.length;for(r=0;r<i;r+=1){s=this.items[r];if(s.find&&(u=s.find(n)))return u}return null}}}(un),qn=function(e){return function(n,r){var i,s,o,u,a,f,l;if(this.nodes){s=this.nodes.length;for(i=0;i<s;i+=1){u=this.nodes[i];if(u.nodeType!==1)continue;e(u,n)&&r.push(u);if(a=u.querySelectorAll(n)){f=a.length;for(l=0;l<f;l+=1)r.push(a[l])}}}else if(this.items){s=this.items.length;for(i=0;i<s;i+=1)o=this.items[i],o.findAll&&o.findAll(n,r)}return r}}(un),Rn=function(t,n){var r,i,s;if(this.items){i=this.items.length;for(r=0;r<i;r+=1)s=this.items[r],s.findAllComponents&&s.findAllComponents(t,n)}return n},Un=function(t){var n,r,i,s;if(this.items){n=this.items.length;for(r=0;r<n;r+=1){i=this.items[r];if(i.findComponent&&(s=i.findComponent(t)))return s}return null}},zn=function(t){var n=t.index;return this.items[n+1]?this.items[n+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)},Wn=function(){return this.items&&this.items[0]?this.items[0].firstNode():this.nodes?this.nodes[0]||null:null},Xn=function(){var t=this;do if(t.pElement)return t.pElement.node;while(t=t.parent);return this.root.el},Vn=function(e,t){function r(e,t,n,i){return i=i||0,e.map(function(e){var s,o,u;return e.text?e.text:e.fragments?e.fragments.map(function(e){return r(e.items,t,n,i)}).join(""):(s=n+"-"+i++,(o=e.root.viewmodel.wrapped[e.keypath])?u=o.value:u=e.value,t[s]=u,"${"+s+"}")}).join("")}var n={};return function(s){var o,u,a,f,l,c,h,p,d;s=s||n,o=s.args,u=o||s.parse,h=o?"argsList":"value",p=o?"dirtyArgs":"dirtyValue";if(this[p]||!this.hasOwnProperty(h))this.items.length===1&&this.items[0].type===e.INTERPOLATOR?(a=this.items[0].value,a!==undefined&&(d=o?[a]:a)):(u&&(f={},l=r(this.items,f,this.root._guid),c=t(o?"["+l+"]":l,f)),c?d=c.value:d=o?[this.toString()]:this.toString()),this[h]=d,this[p]=!1;return this[h]}}(rt,qt),$n=function(){var e=/</g,t=/>/g;return function(r){return r.replace(e,"&lt;").replace(t,"&gt;")}}(),Jn=function(){},Kn=function(t){return t&&t.parentNode&&t.parentNode.removeChild(t),t},Qn=function(e){return function(){return e(this.node)}}(Kn),Gn=function(e,t,n,r){var i=function(t){this.type=e.TEXT,this.text=t.template};return i.prototype={detach:r,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},teardown:n,toString:function(e){return e?t(this.text):this.text},unrender:function(e){if(e)return this.detach()}},i}(rt,$n,Jn,Qn),Yn=function(e){return function(){this.keypath?this.root.viewmodel.unregister(this):e.removeUnresolved(this)}}(D),Zn=function(e){var t=function(t,n,r,i){this.root=t,this.ref=n,this.parentFragment=r,this.resolve=i,e.addUnresolved(this)};return t.prototype={teardown:function(){e.removeUnresolved(this)}},t}(D),er=function(e,t,n){function s(e,t,r){var s,o,u;if(!i.test(e.toString()))return n(e,"_nowrap",{value:!0}),e;if(!e["_"+t._guid]){n(e,"_"+t._guid,{value:function(){var n,r,i,s;t.viewmodel.capture(),r=e.apply(t,arguments),n=t.viewmodel.release();if(n.length){i=o.length;while(i--)s=o[i],s.updateSoftDependencies(n)}return r},writable:!0});for(s in e)e.hasOwnProperty(s)&&(e["_"+t._guid][s]=e[s]);e["_"+t._guid+"_evaluators"]=[]}return o=e["_"+t._guid+"_evaluators"],u=o.indexOf(r),u===-1&&o.push(r),e["_"+t._guid]}var r,i;return i=/this/,r=function(t,n,r,i,o){var u;this.evaluator=r,this.keypath=n,this.root=t,this.argNum=i,this.type=e.REFERENCE,this.priority=o,u=t.get(n),typeof u=="function"&&!u._nowrap&&(u=s(u,t,r)),this.value=r.values[i]=u,t.viewmodel.register(this)},r.prototype={setValue:function(e){typeof e=="function"&&!e._nowrap&&(e=s(e,this.root,this.evaluator)),t(e,this.value)||(this.evaluator.values[this.argNum]=e,this.evaluator.bubble(),this.value=e)},invalidate:function(){this.setValue(this.root.viewmodel.get(this.keypath))},teardown:function(){this.root.viewmodel.unregister(this)}},r}(rt,y,d),tr=function(e){var t=function(e,t,n){this.root=e,this.keypath=t,this.priority=n.priority,this.evaluator=n,e.viewmodel.register(this)};return t.prototype={setValue:function(t){e(t,this.value)||(this.evaluator.bubble(),this.value=t)},teardown:function(){this.root.viewmodel.unregister(this)}},t}(y),nr=function(e,t,n,r,i,s){function a(e,t){var n,r;e=e.replace(/\$\{([0-9]+)\}/g,"_$1");if(u[e])return u[e];r=[];while(t--)r[t]="_"+t;return n=new Function(r.join(","),"return("+e+")"),u[e]=n,n}var o,u={};return o=function(e,t,n,r,s,o){var u=this;u.root=e,u.uniqueString=n,u.keypath=t,u.priority=o,u.fn=a(r,s.length),u.values=[],u.refs=[],u.dependants=0,s.forEach(function(t,n){if(!t)return;t.indexRef?u.values[n]=t.value:u.refs.push(new i(e,t.keypath,u,n,o))})},o.prototype={wake:function(){this.awake=!0},sleep:function(){this.awake=!1,e.modelUpdate(this,!0)},bubble:function(){!this.dirty&&this.awake&&(this.dirty=!0,e.modelUpdate(this))},getValue:function(){var e;try{e=this.fn.apply(null,this.values)}catch(n){this.root.debug&&t('Error evaluating "'+this.uniqueString+'": '+n.message||n),e=undefined}return e},update:function(){var e=this.getValue();return n(e,this.value)||(this.value=e,this.root.viewmodel.clearCache(this.keypath),this.root.viewmodel.adapt(this.keypath,e,!0),r(this.root,this.keypath)),this},teardown:function(){while(this.refs.length)this.refs.pop().teardown();this.root.viewmodel.clearCache(this.keypath),this.root.viewmodel.evaluators[this.keypath]=null},invalidate:function(){this.refs.forEach(function(e){return e.invalidate()}),this.root.viewmodel.clearCache(this.keypath),this.value=this.getValue()},updateSoftDependencies:function(e){var t,n,r;this.softRefs||(this.softRefs=[]),t=this.softRefs.length;while(t--)r=this.softRefs[t],e[r.keypath]||(this.softRefs.splice(t,1),this.softRefs[r.keypath]=!1,r.teardown());t=e.length;while(t--)n=e[t],this.softRefs[n]||(r=new s(this.root,n,this),this.softRefs.push(r),this.softRefs[n]=!0)}},o}(D,H,y,M,er,tr),rr=function(t,n){return t.substr(0,n.length+1)===n+"."},ir=function(e){return function(
n,r,i){if(n===r)return i;if(e(n,r))return n.replace(r+".",i+".")}}(rr),sr=function(e,t,n,r,i){function o(e,t){return e.replace(/\$\{([0-9]+)\}/g,function(e,n){return t[n]?t[n].value||t[n].keypath:"undefined"})}function u(e){return"${"+e.replace(/[\.\[\]]/g,"-")+"}"}var s=function(r,i,s,o){var u=this,a,f,l;a=r.root,this.root=a,this.callback=o,this.owner=r,this.str=s.s,this.args=l=[],this.unresolved=[],this.pending=0,f=i.indexRefs;if(!s.r||!s.r.length){this.resolved=this.ready=!0,this.bubble();return}s.r.forEach(function(r,s){var o,c,h;if(f&&(o=f[r])!==undefined){l[s]={indexRef:r,value:o};return}if(c=t(a,r,i)){l[s]={keypath:c};return}l[s]=null,u.pending+=1,h=new n(a,r,i,function(t){u.resolve(s,t),e(u.unresolved,h)}),u.unresolved.push(h)}),this.ready=!0,this.bubble()};return s.prototype={bubble:function(){if(!this.ready)return;this.uniqueString=o(this.str,this.args),this.keypath=u(this.uniqueString),this.createEvaluator(),this.callback(this.keypath)},teardown:function(){var e;while(e=this.unresolved.pop())e.teardown()},resolve:function(e,t){this.args[e]={keypath:t},this.bubble(),this.resolved=!--this.pending},createEvaluator:function(){var e=this.root.viewmodel.evaluators[this.keypath];e?e.invalidate():(e=new r(this.root,this.keypath,this.uniqueString,this.str,this.args,this.owner.priority),this.root.viewmodel.evaluators[this.keypath]=e,e.update())},rebind:function(e,t,n,r){var s;this.args.forEach(function(o){var u;if(!o)return;o.keypath&&(u=i(o.keypath,n,r))?(o.keypath=u,s=!0):o.indexRef&&o.indexRef===e&&(o.value=t,s=!0)}),s&&this.bubble()}},s}(T,L,Zn,nr,ir),or=function(e,t,n,r,i){var s=function(s,u,a){var f=this,l,c,h,p,d;l=s.root,c=s.parentFragment,this.ref=u.r,this.root=s.root,this.mustache=s,this.priority=s.priority,this.callback=a,this.pending=0,this.unresolved=[],d=this.members=[],this.indexRefMembers=[],this.keypathObservers=[],this.expressionResolvers=[],u.m.forEach(function(u,a){var v,m,g,y,b,w;if(typeof u=="string"){f.members[a]=u;return}if(u.t===e.REFERENCE){v=u.n,m=c.indexRefs;if(m&&(g=m[v])!==undefined){d[a]=g,f.indexRefMembers.push({ref:v,index:a});return}p=!0;if(h=n(l,v,c)){y=new o(l,h,s.priority,f,a),f.keypathObservers.push(y);return}return d[a]=undefined,f.pending+=1,b=new r(l,v,c,function(e){f.resolve(a,e),t(f.unresolved,b)}),f.unresolved.push(b),null}p=!0,f.pending+=1,w=new i(f,c,u,function(e){f.resolve(a,e),t(f.unresolved,w)}),f.unresolved.push(w)});if(!p){h=this.getKeypath(),a(h);return}this.ready=!0,this.bubble()};s.prototype={getKeypath:function(){return this.ref+"."+this.members.join(".")},bubble:function(){if(!this.ready||this.pending)return;this.callback(this.getKeypath())},resolve:function(e,t){var n=new o(this.root,t,this.mustache.priority,this,e);this.keypathObservers.push(n),this.resolved=!--this.pending,this.bubble()},teardown:function(){var e;while(e=this.unresolved.pop())e.teardown()},rebind:function(e,t){var n,r,i;r=this.indexRefMembers.length;while(r--)i=this.indexRefMembers[r],i.ref===e&&(n=!0,this.members[i.index]=t);n&&this.bubble()}};var o=function(e,t,n,r,i){this.root=e,this.keypath=t,this.priority=n,this.resolver=r,this.index=i,e.viewmodel.register(this),this.setValue(e.viewmodel.get(t))};return o.prototype={setValue:function(e){var t=this.resolver;t.members[this.index]=e,t.bubble()},teardown:function(){this.root.viewmodel.unregister(this)}},s}(rt,T,L,Zn,sr),ur=function(e,t,n,r,i){return function(o,u){function p(e){o.resolve(e)}function d(e){var r=n(o.root,e,o.parentFragment);r!==undefined?p(r):(o.ref=e,t.addUnresolved(o))}var a,f,l,c,h;c=u.parentFragment,h=u.template,o.root=c.root,o.parentFragment=c,o.pElement=c.pElement,o.template=u.template,o.index=u.index||0,o.priority=c.priority,o.type=u.template.t;if(a=h.r)f=c.indexRefs,f&&(l=f[a])!==undefined?(o.indexRef=a,o.setValue(l)):d(a);u.template.x&&(o.resolver=new i(o,c,u.template.x,p)),u.template.rx&&(o.resolver=new r(o,u.template.rx,d)),o.template.n===e.SECTION_UNLESS&&!o.hasOwnProperty("value")&&o.setValue(undefined)}}(rt,D,L,or,sr),ar=function(t){var n;if(t===this.keypath)return;if(this.registered){this.root.viewmodel.unregister(this),this.parentFragment&&this.parentFragment.owner&&this.parentFragment.owner.element?n=this.parentFragment.owner.element:n=this,n.rebind(null,null,this.keypath,t);if(t===this.keypath)return}this.keypath=t,this.root.viewmodel.register(this),this.setValue(this.root.viewmodel.get(t))},fr=function(e){return function(n,r,i,s){var o;this.fragments&&this.fragments.forEach(function(e){return e.rebind(n,r,i,s)}),this.resolver&&this.resolver.rebind(n,r,i,s),this.keypath?(o=e(this.keypath,i,s),o&&this.resolve(o)):n!==undefined&&this.indexRef===n&&this.setValue(r)}}(ir),lr=function(e,t,n){return{init:e,resolve:t,rebind:n}}(ur,ar,fr),cr=function(e,t,n,r,i,s,o){var u=function(t){this.type=e.INTERPOLATOR,s.init(this,t)};return u.prototype={update:function(){this.node.data=this.value==undefined?"":this.value},resolve:s.resolve,rebind:s.rebind,detach:o,teardown:i,render:function(){return this.node||(this.node=document.createTextNode(this.value!=undefined?this.value:"")),this.node},unrender:function(e){e&&r(this.node)},setValue:function(e){var n;if(n=this.root.viewmodel.wrapped[this.keypath])e=n.get();e!==this.value&&(this.value=e,this.parentFragment.bubble(),this.node&&t.viewUpdate(this))},firstNode:function(){return this.node},toString:function(e){var t=this.value!=undefined?""+this.value:"";return e?n(t):t}},u}(rt,D,$n,Kn,Yn,lr,Qn),hr=function(){this.parentFragment.bubble()},pr=function(){var t;return this.fragments.length===1?this.fragments[0].detach():(t=document.createDocumentFragment(),this.fragments.forEach(function(e){t.appendChild(e.detach())}),t)},dr=function(t){var n,r,i;r=this.fragments.length;for(n=0;n<r;n+=1)if(i=this.fragments[n].find(t))return i;return null},vr=function(t,n){var r,i;i=this.fragments.length;for(r=0;r<i;r+=1)this.fragments[r].findAll(t,n)},mr=function(t,n){var r,i;i=this.fragments.length;for(r=0;r<i;r+=1)this.fragments[r].findAllComponents(t,n)},gr=function(
t){var n,r,i;r=this.fragments.length;for(n=0;n<r;n+=1)if(i=this.fragments[n].findComponent(t))return i;return null},yr=function(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)},br=function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},wr=function(e){var t;return e.push(function(){t=e.Fragment}),function(n){var r=this,i,s,o,u,a,f,l,c;i=this.parentFragment,a=[],n.forEach(function(t,n){var i,o,u,f;if(t===n){a[t]=r.fragments[n];return}i=r.fragments[n],s===undefined&&(s=n);if(t===-1){i.unrender(!0),i.teardown();return}o=t-n,u=r.keypath+"."+n,f=r.keypath+"."+t,i.rebind(r.template.i,t,u,f),a[t]=i}),s===undefined&&(s=this.length),this.length=this.fragments.length=u=this.root.get(this.keypath).length;if(u===s)return;f={template:this.template.f,root:this.root,owner:this},this.template.i&&(f.indexRef=this.template.i);for(o=s;o<u;o+=1)(l=a[o])?this.docFrag.appendChild(l.detach(!1)):(f.context=this.keypath+"."+o,f.index=o,l=new t(f),this.docFrag.appendChild(l.render())),this.fragments[o]=l;c=i.findNextNode(this),this.parentFragment.getNode().insertBefore(this.docFrag,c)}}(i),Er=function(){var t;return t=this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,t},Sr=function(e,t,n,r,i){function o(r,i){var s={template:r.template.f,root:r.root,pElement:r.parentFragment.pElement,owner:r};if(r.template.n)switch(r.template.n){case e.SECTION_IF:return l(r,i,!1,s);case e.SECTION_UNLESS:return l(r,i,!0,s);case e.SECTION_WITH:return f(r,s);case e.SECTION_EACH:if(n(i))return a(r,i,s)}return t(i)?u(r,i,s):n(i)||typeof i=="function"?r.template.i?a(r,i,s):f(r,s):l(r,i,!1,s)}function u(e,t,n){var r,i,o,u;i=t.length;if(i===e.length)return!1;if(i<e.length)u=e.fragments.splice(i,e.length-i),u.forEach(c);else if(i>e.length)for(r=e.length;r<i;r+=1)n.context=e.keypath+"."+r,n.index=r,e.template.i&&(n.indexRef=e.template.i),o=new s(n),e.unrenderedFragments.push(e.fragments[r]=o);return e.length=i,!0}function a(e,t,n){var r,i,o,u,a;o=e.hasKey||(e.hasKey={}),i=e.fragments.length;while(i--)u=e.fragments[i],u.index in t||(a=!0,c(e.fragments[i]),e.fragments.splice(i,1),o[u.index]=!1);for(r in t)o[r]||(a=!0,n.context=e.keypath+"."+r,n.index=r,e.template.i&&(n.indexRef=e.template.i),u=new s(n),e.unrenderedFragments.push(u),e.fragments.push(u),o[r]=!0);return e.length=e.fragments.length,a}function f(e,t){var n;if(!e.length)return t.context=e.keypath,t.index=0,n=new s(t),e.unrenderedFragments.push(e.fragments[0]=n),e.length=1,!0}function l(e,n,r,i){var o,u,a;u=t(n)&&n.length===0,r?o=u||!n:o=n&&!u;if(o){if(!e.length)return i.index=0,a=new s(i),e.unrenderedFragments.push(e.fragments[0]=a),e.length=1,!0;if(e.length>1)return e.fragments.splice(1).forEach(c),!0}else if(e.length)return e.fragments.splice(0).forEach(c),e.length=0,!0}function c(e){e.rendered&&e.unrender(!0),e.teardown()}var s;return i.push(function(){s=i.Fragment}),function(t){var n;if(n=this.root.viewmodel.wrapped[this.keypath])t=n.get();o(this,t)&&(this.bubble(),this.rendered&&r.viewUpdate(this)),this.value=t}}(rt,o,u,D,i),xr=function(e,t){function r(e){e.unrender(!0),e.teardown()}function i(t,r,i){var s,o,u;s={template:t.template.f,root:t.root,pElement:t.pElement,owner:t,indexRef:t.template.i};for(u=r;u<i;u+=1)s.context=t.keypath+"."+u,s.index=u,o=new n(s),t.unrenderedFragments.push(t.fragments[u]=o);t.insertionPoint=t.fragments[i]?t.fragments[i].firstNode():t.parentFragment.findNextNode(t),e.viewUpdate(t)}function s(e,t,n,r){var i,s,o,u,a;o=e.template.i;for(i=t;i<n;i+=1)s=e.fragments[i],u=e.keypath+"."+(i-r),a=e.keypath+"."+i,s.index=i,s.rebind(o,i,u,a)}var n;return t.push(function(){n=t.Fragment}),function(e){var t=this,n,o,u,a,f;n=e.balance;if(!n)return;o=e.rangeStart,t.length+=n;if(n<0){t.fragments.splice(o,-n).forEach(r),s(t,o,t.length,n);return}u=o+e.removed,a=o+e.added,f=[u,0],f.length+=n,t.fragments.splice.apply(t.fragments,f),s(t,a,t.length,n),i(t,u,a)}}(D,i),Tr=function(e){return function(){this.fragments.splice(0).forEach(function(e){return e.teardown()}),e.call(this)}}(Yn),Nr=function(t){var n,r,i;n="",r=0,i=this.length;for(r=0;r<i;r+=1)n+=this.fragments[r].toString(t);return n},Cr=function(t){this.fragments.forEach(function(e){return e.unrender(t)})},kr=function(){var t,n,r;if(!this.unrenderedFragments.length)return;while(t=this.unrenderedFragments.shift())this.docFrag.appendChild(t.render());this.rendered&&(n=this.insertionPoint||this.parentFragment.findNextNode(this),r=this.parentFragment.getNode(),r.insertBefore(this.docFrag,n),this.insertionPoint=null)},Lr=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=function(n){this.type=e.SECTION,this.inverted=!!n.template.n,this.pElement=n.pElement,this.fragments=[],this.unrenderedFragments=[],this.length=0,t.init(this,n)};return y.prototype={bubble:n,detach:r,find:i,findAll:s,findAllComponents:o,findComponent:u,findNextNode:a,firstNode:f,merge:l,rebind:t.rebind,render:c,resolve:t.resolve,setValue:h,splice:p,teardown:d,toString:v,unrender:m,update:g},y}(rt,lr,hr,pr,dr,vr,mr,gr,yr,br,wr,Er,Sr,xr,Tr,Nr,Cr,kr),Ar=function(){var t,n;if(this.docFrag){t=this.nodes.length;for(n=0;n<t;n+=1)this.docFrag.appendChild(this.nodes[n]);return this.docFrag}},Or=function(e){return function(n){var r,i,s,o;i=this.nodes.length;for(r=0;r<i;r+=1){s=this.nodes[r];if(s.nodeType!==1)continue;if(e(s,n))return s;if(o=s.querySelector(n))return o}return null}}(un),Mr=function(e){return function(n,r){var i,s,o,u,a,f;s=this.nodes.length;for(i=0;i<s;i+=1){o=this.nodes[i];if(o.nodeType!==1)continue;e(o,n)&&r.push(o);if(u=o.querySelectorAll(n)){a=u.length;for(f=0;f<a;f+=1)r.push(u[f])}}}}(un),_r=function(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},Dr=function(e,t){function o(e){return n[e]||(n[e]=t(e))}var n={},r,i;try{t("table").innerHTML="foo"}catch(s){r=!0,i={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">'
,"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}return function(t,n,s){var u,a=[],f;if(t){r&&(f=i[n.tagName])?(u=o("DIV"),u.innerHTML=f[0]+t+f[1],u=u.querySelector(".x")):n.namespaceURI===e.svg?(u=o("DIV"),u.innerHTML='<svg class="x">'+t+"</svg>",u=u.querySelector(".x")):(u=o(n.tagName),u.innerHTML=t);while(u.firstChild)a.push(u.firstChild),s.appendChild(u.firstChild)}return a}}(c,h),Pr=function(){var e="option[selected]";return function(n){var r,i,s;if(!n||n.name!=="select"||!n.binding)return;if(n.getAttribute("multiple"))r=n.findAll(e),s=r.map(function(e){return e.value});else if(i=n.find(e))s=i.value;s!==undefined&&n.binding.setValue(s),n.bubble()}}(),Hr=function(e,t){return function(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=e(this.value,this.parentFragment.getNode(),this.docFrag),t(this.pElement),this.rendered=!0,this.docFrag}}(Dr,Pr),Br=function(e){return function(n){var r;if(r=this.root.viewmodel.wrapped[this.keypath])n=r.get();n!==this.value&&(this.value=n,this.parentFragment.bubble(),this.rendered&&e.viewUpdate(this))}}(D),jr=function(){return this.value!=undefined?this.value:""},Fr=function(e){return function(n){this.rendered&&n&&(this.nodes.forEach(e),this.rendered=!1)}}(Kn),Ir=function(e,t){return function(){var r,i;if(!this.rendered)return;while(this.nodes&&this.nodes.length)r=this.nodes.pop(),r.parentNode.removeChild(r);i=this.parentFragment.getNode(),this.nodes=e(this.value,i,this.docFrag),i.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),t(this.pElement)}}(Dr,Pr),qr=function(e,t,n,r,i,s,o,u,a,f,l,c){var h=function(n){this.type=e.TRIPLE,t.init(this,n)};return h.prototype={detach:n,find:r,findAll:i,firstNode:s,rebind:t.rebind,render:o,resolve:t.resolve,setValue:u,teardown:c,toString:a,unrender:f,update:l},h}(rt,lr,Ar,Or,Mr,_r,Hr,Br,jr,Fr,Ir,Yn),Rr=function(){this.parentFragment.bubble()},Ur=function(e,t){return function(){var r;if(this.node)return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node;if(this.cssDetachQueue.length){e.start();while(r===this.cssDetachQueue.pop())t.remove(r);e.end()}}}(D,N),zr=function(e){return function(t){if(e(this.node,t))return this.node;if(this.fragment&&this.fragment.find)return this.fragment.find(t)}}(un),Wr=function(e,t){t._test(this,!0)&&t.live&&(this.liveQueries||(this.liveQueries=[])).push(t),this.fragment&&this.fragment.findAll(e,t)},Xr=function(e,t){this.fragment&&this.fragment.findAllComponents(e,t)},Vr=function(e){if(this.fragment)return this.fragment.findComponent(e)},$r=function(){return null},Jr=function(){return this.node},Kr=function(t){if(!this.attributes||!this.attributes[t])return;return this.attributes[t].value},Qr=function(){var e,t,n,r;return e="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),t="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),n=function(e){var t={},n=e.length;while(n--)t[e[n].toLowerCase()]=e[n];return t},r=n(e.concat(t)),function(e){var t=e.toLowerCase();return r[t]||t}}(),Gr=function(e){var t={svg:e.svg,foreignObject:e.html};return function(n,r){return n.a&&n.a.xmlns?n.a.xmlns:t[n.e]||r&&r.namespace||e.html}}(c),Yr=function(e){return function(){var n=this.fragment.getValue();n!==this.value&&(this.value=n,this.name==="value"&&this.node&&(this.node._ractive.value=n),this.rendered&&e.viewUpdate(this))}}(D),Zr=function(e,t){return function(n,r){var i,s;i=r.indexOf(":");if(i!==-1){s=r.substr(0,i);if(s!=="xmlns"){r=r.substring(i+1),n.name=t(r),n.namespace=e[s.toLowerCase()];if(!n.namespace)throw'Unknown namespace ("'+s+'")';return}}n.name=n.element.namespace!==e.html?t(r):r}}(c,Qr),ei=function(e){return function(n){var r,i;r=n.fragment.items;if(r.length!==1)return;i=r[0];if(i.type!==e.INTERPOLATOR||!i.keypath&&!i.ref)return;return i}}(rt),ti=function(e){var t={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(n,r){var i;if(n.pNode&&!n.namespace&&(!r.pNode.namespaceURI||r.pNode.namespaceURI===e.html)){i=t[n.name]||n.name,r.pNode[i]!==undefined&&(n.propertyName=i);if(typeof r.pNode[i]=="boolean"||i==="value")n.useProperty=!0}}}(c),ni=function(e,t,n,r,i){var s;return i.push(function(){s=i.Fragment}),function(o){this.type=e.ATTRIBUTE,this.element=o.element,this.root=o.root,t(this,o.name);if(!o.value||typeof o.value=="string"){this.value=o.value||!0;return}this.parentFragment=this
.element.parentFragment,this.fragment=new s({template:o.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=n(this),this.isBindable=!!this.interpolator,r(this,o),this.ready=!0}}(rt,Zr,ei,ti,i),ri=function(t,n,r,i){this.fragment&&(this.fragment.rebind(t,n,r,i),this.twoway&&this.updateBindings())},ii=function(e){var t={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(r){var i;this.node=r;if(!r.namespaceURI||r.namespaceURI===e.html){i=t[this.name]||this.name,r[i]!==undefined&&(this.propertyName=i);if(typeof r[i]=="boolean"||i==="value")this.useProperty=!0;i==="value"&&(this.useProperty=!0,r._ractive.value=this.value)}this.rendered=!0,this.update()}}(c),si=function(){var t;if(this.boundEvents){t=this.boundEvents.length;while(t--)this.node.removeEventListener(this.boundEvents[t],this.updateModel,!1)}this.fragment&&this.fragment.teardown()},oi=function(){function t(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var e=/allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|draggable|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|spellcheck|translate|trueSpeed|typeMustMatch|visible/;return function(){var r,i;if(this.value===null)return this.name;if(this.name==="value"&&this.element.name==="select")return;return this.name==="name"&&this.element.name==="input"&&(i=this.interpolator)?"name={{"+(i.keypath||i.ref)+"}}":e.test(this.name)?this.fragment?this.fragment.getValue()?this.name:null:this.value?this.name:null:(this.fragment?r=t(this.fragment.toString()):r=t(this.value),this.name+(r?'="'+r+'"':""))}}(),ui=function(){var t=this.value,n,r,i,s;if(!this.locked){this.node._ractive.value=t,n=this.node.options,s=n.length;while(s--){r=n[s],i=r._ractive?r._ractive.value:r.value;if(i==t){r.selected=!0;break}}}},ai=function(e){return function(){var n=this.value,r,i,s,o;e(n)||(n=[n]),r=this.node.options,i=r.length;while(i--)s=r[i],o=s._ractive?s._ractive.value:s.value,s.selected=n.indexOf(o)!==-1}}(o),fi=function(){var t,n;t=this.node,n=this.value,t.checked=n==t._ractive.value},li=function(e){return function(){var n,r;n=this.node,r=this.value,e(r)?n.checked=r.indexOf(n._ractive.value)!==-1:n.checked=r==n._ractive.value}}(o),ci=function(){var t,n;t=this.node,n=this.value,n===undefined&&(n=""),t.className=n},hi=function(){var t,n;t=this.node,n=this.value,n!==undefined&&(this.root.nodes[n]=undefined),this.root.nodes[n]=t,t.id=n},pi=function(){var t,n;t=this.node,n=this.value,n===undefined&&(n=""),t.style.setAttribute("cssText",n)},di=function(){var t,n;t=this.node,n=this.value,n===undefined&&(n=""),this.locked||(t.innerHTML=n)},vi=function(){var t,n;t=this.node,n=this.value,t._ractive.value=n,this.locked||(t.value=n==undefined?"":n)},mi=function(){this.locked||(this.node[this.propertyName]=this.value)},gi=function(){var t,n;t=this.node,n=this.value,this.namespace?t.setAttributeNS(this.namespace,this.name,n):t.setAttribute(this.name,n)},yi=function(e,t,n,r,i,s,o,u,a,f,l,c,h){return function(){var d,v,m;d=this.name,v=this.element,m=this.node,d==="id"?this.update=u:v.name==="select"&&d==="value"?this.update=m.multiple?r:n:v.name==="input"&&m.type==="file"&&d==="value"?this.update=t:this.twoway&&d==="name"?m.type==="radio"?this.update=i:m.type==="checkbox"&&(this.update=s):d==="style"&&m.style.setAttribute?this.update=a:d!=="class"||!!m.namespaceURI&&m.namespaceURI!==e.html?m.getAttribute("contenteditable")&&this.name==="value"?this.update=f:d==="value"?this.update=l:this.useProperty?this.update=c:this.update=h:this.update=o,this.update()}}(c,Jn,ui,ai,fi,li,ci,hi,pi,di,vi,mi,gi),bi=function(){this.keypath=this.interpolator.keypath||this.interpolator.ref,this.propertyName==="name"&&(this.node.name="{{"+this.keypath+"}}")},wi=function(e,t,n,r,i,s,o,u){var a=function(e){this.init(e)};return a.prototype={bubble:e,init:t,rebind:n,render:r,teardown:i,toString:s,update:o,updateBindings:u},a}(Yr,ni,ri,ii,si,oi,yi,bi),Ei=function(e){return function(t,n){var r,i,s=[];for(r in n)n.hasOwnProperty(r)&&(i=new e({element:t,name:r,value:n[r],root:t.root}),s.push(s[r]=i));return s}}(wi),Si=function(e,t,n,r){var i=function(e){var n;this.element=e,this.root=e.root,this.attribute=e.attributes[this.name||"value"],n=this.attribute.interpolator;if(n.keypath&&n.keypath.substr==="${")return t("Two-way binding does not work with expressions: "+n.keypath),!1;n.keypath||n.resolve(n.ref),this.keypath=this.attribute.interpolator.keypath,this.root.viewmodel.get(this.keypath)===undefined&&this.getInitialValue&&this.root.viewmodel.set(this.keypath,this.getInitialValue())};return i.prototype={handleChange:function(){e.lockAttribute(this.attribute),e.start(this.root),this.root.viewmodel.set(this.keypath,this.getValue()),e.end()},rebind:function(e,t,n,r){var i;this.keypath.substr(0,n.length)===n&&(i=this.root._twowayBindings[this.keypath],i.splice(i.indexOf(this),1),this.keypath=this.keypath.replace(n,r),i=this.root._twowayBindings[this.keypath]||(this.root._twowayBindings[this.keypath]=[]),i.push(this))}},i.extend=function(e){var t=this,s;return s=function(e){i.call(this,e),this.init&&this.init()},s.prototype=n(t.prototype),r(s.prototype,e),s.extend=i.extend,s},i}(D,H,U,j),xi=function(){this._ractive.binding.handleChange()},Ti=function(e,t){var n=e.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var e=this.element.node
;e.addEventListener("change",t,!1),this.root.lazy||(e.addEventListener("input",t,!1),e.attachEvent&&e.addEventListener("keyup",t,!1))},unrender:function(){var e=this.element.node;e.removeEventListener("change",t,!1),e.removeEventListener("input",t,!1),e.removeEventListener("keyup",t,!1)},getValue:function(){return this.element.node.innerHTML}});return n}(Si,xi),Ni=function(e,t,n){var r=t.extend({name:"name",init:function(){this.radioName=!0},render:function(){var t=this,r=this.element.node,i;r.name="{{"+this.keypath+"}}",r.addEventListener("change",n,!1),r.attachEvent&&r.addEventListener("click",n,!1),i=this.root.viewmodel.get(this.keypath),i!==undefined?r.checked=i==r._ractive.value:e.afterModelUpdate(function(){return t.handleChange()})},unrender:function(){var e=this.element.node;e.removeEventListener("change",n,!1),e.removeEventListener("click",n,!1)},getValue:function(){var e=this.element.node;return e._ractive?e._ractive.value:e.value},handleChange:function(){var e=this.element.node;e.checked&&t.prototype.handleChange.call(this)},rebind:function(e,n,r,i){t.prototype.rebind.call(this,e,n,r,i),this.element.node.name="{{"+this.keypath+"}}"}});return r}(D,Si,xi),Ci=function(e,t,n,r){var i=n.extend({name:"name",init:function(){this.checkboxName=!0,this.isChecked=this.element.getAttribute("checked"),this.siblings=this.root._checkboxNameBindings[this.keypath]||(this.root._checkboxNameBindings[this.keypath]=[]),this.siblings.push(this)},teardown:function(){t(this.siblings,this)},render:function(){var t=this.element.node,n,i;this.element.node.name="{{"+this.keypath+"}}",t.addEventListener("change",r,!1),t.attachEvent&&t.addEventListener("click",r,!1),n=this.root.viewmodel.get(this.keypath),n!==undefined?(i=n.indexOf(t._ractive.value)!==-1,t.checked=i):e.addCheckboxBinding(this)},unrender:function(){var e=this.element.node;e.removeEventListener("change",r,!1),e.removeEventListener("click",r,!1)},changed:function(){return this.element.node.checked!==!!this.checked},handleChange:function(){var t=[];this.isChecked=this.element.node.checked,this.siblings.forEach(function(e){e.isChecked&&t.push(e.element.getAttribute("value"))}),e.start(this.root),this.root.viewmodel.set(this.keypath,t),e.end()},getValue:function(){throw new Error("This code should not execute!")}});return i}(D,T,Si,xi),ki=function(e,t){var n=e.extend({name:"checked",render:function(){var e=this.element.node;e.addEventListener("change",t,!1),e.attachEvent&&e.addEventListener("click",t,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",t,!1),e.removeEventListener("click",t,!1)},getValue:function(){return this.element.node.checked}});return n}(Si,xi),Li=function(e,t,n){var r=t.extend({getInitialValue:function(){var e=this.element.options,t,n;n=t=e.length;if(!t)return;while(n--)if(e[n].getAttribute("selected"))return e[n].getAttribute("value");while(n++<t)if(!e[n].getAttribute("disabled"))return e[n].getAttribute("value")},render:function(){this.element.node.addEventListener("change",n,!1)},unrender:function(){this.element.node.removeEventListener("change",n,!1)},setValue:function(e){this.root.viewmodel.set(this.keypath,e)},getValue:function(){var e,t,n,r,i;e=this.element.node.options,n=e.length;for(t=0;t<n;t+=1){r=e[t];if(e[t].selected)return i=r._ractive?r._ractive.value:r.value,i}},dirty:function(){var t=this;this._dirty||(this._dirty=!0,this.attribute.value===undefined&&e.afterModelUpdate(function(){t.root.viewmodel.set(t.keypath,t.getInitialValue())}))}});return r}(D,Si,xi),Ai=function(e){return function(t,n){var r;if(!e(t)||!e(n))return!1;if(t.length!==n.length)return!1;r=t.length;while(r--)if(t[r]!==n[r])return!1;return!0}}(o),Oi=function(e,t,n){var r=t.extend({getInitialValue:function(){return this.element.options.filter(function(e){return e.getAttribute("selected")}).map(function(e){return e.getAttribute("value")})},render:function(){var e;this.element.node.addEventListener("change",n,!1),e=this.root.viewmodel.get(this.keypath),e===undefined&&this.handleChange()},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var e,t,n,r,i,s;e=[],t=this.element.node.options,r=t.length;for(n=0;n<r;n+=1)i=t[n],i.selected&&(s=i._ractive?i._ractive.value:i.value,e.push(s));return e},handleChange:function(){var n,r,i;return n=this.attribute,r=n.value,i=this.getValue(),(r===undefined||!e(i,r))&&t.prototype.handleChange.call(this),this},updateModel:function(){(this.attribute.value===undefined||!this.attribute.value.length)&&this.root.viewmodel.set(this.keypath,this.initialValue)}});return r}(Ai,Li,xi),Mi=function(e,t){var n=e.extend({render:function(){this.element.node.addEventListener("change",t,!1)},unrender:function(){this.element.node.removeEventListener("change",t,!1)},getValue:function(){return this.element.node.files}});return n}(Si,xi),_i=function(e,t){function i(){var e;t.call(this),e=this._ractive.root.viewmodel.get(this._ractive.binding.keypath,r),this.value=e==undefined?"":e}var n,r;return r={evaluateWrapped:!0},n=e.extend({getInitialValue:function(){return""},render:function(){var e=this.element.node;e.addEventListener("change",t,!1),this.root.lazy||(e.addEventListener("input",t,!1),e.attachEvent&&e.addEventListener("keyup",t,!1)),e.addEventListener("blur",i,!1)},getValue:function(){var e=this.element.node.value;return e},unrender:function(){var e=this.element.node;e.removeEventListener("change",t,!1),e.removeEventListener("input",t,!1),e.removeEventListener("keyup",t,!1),e.removeEventListener("blur",i,!1)}}),n}(Si,xi),Di=function(e){return e.extend({getInitialValue:function(){return undefined},getValue:function(){var e=parseFloat(this.element.node.value);return isNaN(e)?undefined:e}})}(_i),Pi=function(e,t,n,r,i,s,o,u,a){function f(e){return e&&e.isBindable}return function(c){var h=c.attributes,p,d;c.binding&&(c.binding.teardown(),c.binding=null),c.getAttribute("contenteditable")&&f(h.value)?d=e:c.name==="input"?(p=c.getAttribute("type"),p==="radio"||p==="checkbox"?(f(h
.name)&&(d=p==="radio"?t:n),f(h.checked)&&(d=r)):p==="file"&&f(h.value)?d=o:f(h.value)&&(d=p==="number"||p==="range"?u:a)):c.name==="select"&&f(h.value)?d=c.getAttribute("multiple")?s:i:c.name==="textarea"&&f(h.value)&&(d=a);if(d)return new d(c)}}(Ti,Ni,Ci,ki,Li,Oi,Mi,Di,_i),Hi=function(t){this.root.fire(this.action.toString().trim(),t)},Bi=function(e){function r(e){this.root.fire.apply(this.root,[this.action.toString().trim(),e].concat(this.params))}function i(e){var t=this.dynamicParams.getValue(n);typeof t=="string"&&(t=t.substr(1,t.length-2)),this.root.fire.apply(this.root,[this.action.toString().trim(),e].concat(t))}var t,n={args:!0};return e.push(function(){t=e.Fragment}),function(n,s,o){var u;this.element=n,this.root=n.root,this.name=s,this.proxies=[],u=o.n||o,typeof u!="string"&&(u=new t({template:u,root:this.root,owner:this.element})),this.action=u,o.d?(this.dynamicParams=new t({template:o.d,root:this.root,owner:this.element}),this.fire=i):o.a&&(this.params=o.a,this.fire=r)}}(i),ji=function(t,n,r,i){typeof this.action!="string"&&this.action.rebind(t,n,r,i),this.dynamicParams&&this.dynamicParams.rebind(t,n,r,i)},Fi=function(e,t){function i(e){var t,n;t=this._ractive,n=t.events[e.type],n.fire({node:this,original:e,index:t.index,keypath:t.keypath,context:t.root.get(t.keypath)})}function s(e){return r[e]||(r[e]=function(t){var n=t.node._ractive;t.index=n.index,t.keypath=n.keypath,t.context=n.root.get(n.keypath),n.events[e].fire(t)}),r[e]}var n={},r={};return function(){var o=this.name,u;this.node=this.element.node,(u=t.registries.events.find(this.root,o))?this.custom=u(this.node,s(o)):(!("on"+o in this.node)&&!(window&&"on"+o in window)&&(n[o]||(e('Missing "'+this.name+'" event. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#events'),n[o]=!0)),this.node.addEventListener(o,i,!1)),this.node._ractive.events[o]=this}}(H,en),Ii=function(){typeof this.action!="string"&&this.action.teardown(),this.dynamicParams&&this.dynamicParams.teardown()},qi=function(){},Ri=function(e,t,n,r,i,s){var o=function(e,t,n){this.init(e,t,n)};return o.prototype={fire:e,init:t,rebind:n,render:r,teardown:i,unrender:s},o}(Hi,Bi,ji,Fi,Ii,qi),Ui=function(e){return function(t,n){var r,i,s,o,u=[];for(i in n)if(n.hasOwnProperty(i)){s=i.split("-"),r=s.length;while(r--)o=new e(t,s[r],n[i]),u.push(o)}return u}}(Ri),zi=function(e,t,n){var r,i,s;return t.push(function(){r=t.Fragment}),i={args:!0},s=function(t,s){var o=this,u,a,f,l;o.element=t,o.root=u=t.root,a=s.n||s,typeof a!="string"&&(f=new r({template:a,root:u,owner:t}),a=f.toString(),f.teardown()),s.a?o.params=s.a:s.d&&(o.fragment=new r({template:s.d,root:u,owner:t}),o.params=o.fragment.getValue(i),o.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,o.params=this.getValue(i),o.ready&&o.update()}),o.fn=n.registries.decorators.find(u,a);if(!o.fn){l='Missing "'+a+'" decorator. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#decorators';if(u.debug)throw new Error(l);e(l)}},s.prototype={init:function(){var e=this,t,n,r;t=e.element.node,e.params?(r=[t].concat(e.params),n=e.fn.apply(e.root,r)):n=e.fn.call(e.root,t);if(!n||!n.teardown)throw new Error("Decorator definition must return an object with a teardown method");e.actual=n,e.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},teardown:function(e){this.actual.teardown(),!e&&this.fragment&&this.fragment.teardown()}},s}(H,i,en),Wi=function(e,t,n){var r,i={};return n.push(function(){r=n.Fragment}),function(s,o){var u=this,a,f,l,c;u.element=s,u.root=a=s.root,f=o.n||o,typeof f!="string"&&(l=new r({template:f,root:a,owner:s}),f=l.toString(),l.teardown()),u.name=f,o.a?u.params=o.a:o.d&&(l=new r({template:o.d,root:a,owner:s}),u.params=l.getValue(i),l.teardown()),u._fn=t.registries.transitions.find(a,f);if(!u._fn){c='Missing "'+f+'" transition. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#transitions';if(a.debug)throw new Error(c);e(c);return}}}(H,en,i),Xi=function(e,t,n){var r,i,s;return e?(i={},s=n("div").style,r=function(e){var n,r,o;if(!i[e])if(s[e]!==undefined)i[e]=e;else{o=e.charAt(0).toUpperCase()+e.substring(1),n=t.length;while(n--){r=t[n];if(s[r+o]!==undefined){i[e]=r+o;break}}}return i[e]}):r=null,r}(p,E,h),Vi=function(e,t,n,r){var i,s;return t?(s=window.getComputedStyle||e.getComputedStyle,i=function(e){var t,i,s,o,u;t=window.getComputedStyle(this.node);if(typeof e=="string")return u=t[r(e)],u==="0px"&&(u=0),u;if(!n(e))throw new Error("Transition#getStyle must be passed a string, or an array of strings representing CSS properties");i={},s=e.length;while(s--)o=e[s],u=t[r(o)],u==="0px"&&(u=0),i[o]=u;return i}):i=null,i}(K,p,o,Xi),$i=function(e){return function(t,n){var r;if(typeof t=="string")this.node.style[e(t)]=n;else for(r in t)t.hasOwnProperty(r)&&(this.node.style[e(r)]=t[r]);return this}}(Xi),Ji=function(e){return e.replace(/-([a-zA-Z])/g,function(e,t){return t.toUpperCase()})},Ki=function(e,t,n){function i(e){return e}var r=function(r){var s;this.duration=r.duration,this.step=r.step,this.complete=r.complete,typeof r.easing=="string"?(s=r.root.easing[r.easing],s||(e('Missing easing function ("'+r.easing+'"). You may need to download a plugin from [TODO]'),s=i)):typeof r.easing=="function"?s=r.easing:s=i,this.easing=s,this.start=t(),this.end=this.start+this.duration,this.running=!0,n.add(this)};return r.prototype={tick:function(e){var t,n;return this.running?e>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(t=e-this.start,n=this.easing(t/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}},r}(H,x,P),Qi=function(e){var t=new RegExp("^-(?:"+e.join("|")+")-");return function(e){return e.replace(t,"")}}(E),Gi=function(e){var t=new RegExp("^(?:"+e.join("|")+")([A-Z])");return function(e){var n;return e?(t.test(e)&&(e="-"+e),n=e.replace(/[A-Z]/g,function(e){return"-"+
e.toLowerCase()}),n):""}}(E),Yi=function(e,t,n,r,i,s,o,u,a){var f,l,c,h,p,d,v,m,g={},y={};return e?(l=n("div").style,function(){l.transition!==undefined?(c="transition",h="transitionend",p=!0):l.webkitTransition!==undefined?(c="webkitTransition",h="webkitTransitionEnd",p=!0):p=!1}(),c&&(d=c+"Duration",v=c+"Property",m=c+"TimingFunction"),f=function(e,n,f,l,c,p){setTimeout(function(){var b,w,E,S;S=function(){w&&E&&p()},b=e.node.namespaceURI+e.node.tagName,e.node.style[v]=l.map(o).map(a).join(","),e.node.style[m]=a(f.easing||"linear"),e.node.style[d]=f.duration/1e3+"s",c=function(t){var n;n=l.indexOf(r(u(t.propertyName))),n!==-1&&l.splice(n,1);if(l.length)return;e.root.fire(e.name+":end"),e.node.removeEventListener(h,c,!1),E=!0,S()},e.node.addEventListener(h,c,!1),setTimeout(function(){var u=l.length,a,p,d,v=[],m;while(u--)m=l[u],a=b+m,g[a]?e.node.style[o(m)]=n[m]:p=e.getStyle(m),g[a]===undefined&&(e.node.style[o(m)]=n[m],g[a]=e.getStyle(m)!=n[m],y[a]=!g[a]),y[a]&&(d=l.indexOf(m),d===-1?t("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!"):l.splice(d,1),e.node.style[o(m)]=p,v.push({name:o(m),interpolator:i(p,n[m])}));v.length?new s({root:e.root,duration:f.duration,easing:r(f.easing),step:function(t){var n,r;r=v.length;while(r--)n=v[r],e.node.style[n.name]=n.interpolator(t)},complete:function(){w=!0,S()}}):w=!0,l.length||(e.node.removeEventListener(h,c,!1),E=!0,S())},0)},f.delay||0)}):f=null,f}(p,H,h,Ji,tn,Ki,Xi,Qi,Gi),Zi=function(e,t,n,r,i,s){var o,u;return t?(u=window.getComputedStyle||e.getComputedStyle,o=function(e,t,o,u){var a=this,f;typeof e=="string"?(f={},f[e]=t):(f=e,u=o,o=t),o||(n('The "'+a.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),o=a,u=a.complete);var l=new r(function(e){var t,n,r,u,l,c,h,p;if(!o.duration){a.setStyle(f),e();return}t=Object.keys(f),n=[],r=window.getComputedStyle(a.node),l={},h=t.length;while(h--)p=t[h],u=r[i(p)],u==="0px"&&(u=0),u!=f[p]&&(n.push(p),a.node.style[i(p)]=u);if(!n.length){e();return}s(a,f,o,n,c,e)});return u&&(n("t.animateStyle returns a Promise as of 0.4.0. Transition authors should do t.animateStyle(...).then(callback)"),l.then(u)),l}):o=null,o}(K,p,H,b,Xi,Yi),es=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&!(n in e)&&(e[n]=t[n]);return e},ts=function(e){return function(t,n){return typeof t=="number"?t={duration:t}:typeof t=="string"?t==="slow"?t={duration:600}:t==="fast"?t={duration:200}:t={duration:400}:t||(t={}),e(t,n)}}(es),ns=function(){function e(e,t){t?e.setAttribute("style",t):(e.getAttribute("style"),e.removeAttribute("style"))}return function(n){var r=this,i,s;i=r.node=r.element.node,s=i.getAttribute("style"),r.isIntro=!!n,r.complete=function(t){!t&&r.isIntro&&e(i,s),i._ractive.transition=null,r._manager.remove(r)};if(!r._fn){r.complete();return}r._fn.apply(r.root,[r].concat(r.params))}}(),rs=function(e,t,n,r,i,s,o){var u,a,f;return o.push(function(){u=o.Fragment}),a={args:!0},f=function(e,t){this.init(e,t)},f.prototype={init:e,start:s,getStyle:t,setStyle:n,animateStyle:r,processParams:i},f}(Wi,Vi,$i,Zi,ts,ns,i),is=function(t){var n=[],r=t.length;while(r--)n[r]=t[r];return n},ss=function(e,t){function n(e,t){var n=e.length;while(n--)if(e[n]==t)return!0}return function(i){var s,o,u,a,f,l,c;s=i.node;if(!s)return;a=e(s.options),o=i.getAttribute("value"),u=i.getAttribute("multiple");if(o!==undefined)a.forEach(function(e){var t,r;t=e._ractive?e._ractive.value:e.value,r=u?n(o,t):o==t,r&&(c=!0),e.selected=r}),c||(a[0]&&(a[0].selected=!0),i.binding&&(o=u?[]:a[0]?a[0]._ractive?a[0]._ractive.value:a[0].value:undefined,i.root.viewmodel.set(i.binding.keypath,o)));else if(i.binding){if(u)f=a.reduce(function(e,t){return t.selected&&e.push(t.value),e},[]);else{l=a.length;while(l--)if(a[l].selected){f=a[l].value;break}}t.lockAttribute(i.attributes.value),i.root.viewmodel.set(i.binding.keypath)}}}(is,D),os=function(e,t){return function(){var r=this;this.dirty||(this.dirty=!0,e.afterViewUpdate(function(){r.dirty=!1,t(r)})),this.parentFragment.bubble()}}(D,ss),us=function(t){do if(t.name==="select")return t;while(t=t.parent)},as=function(e){return function(n,r){n.select=e(n.parent),n.select.options.push(n),n.select.binding&&n.select.binding.dirty(),r.a||(r.a={}),!r.a.value&&!r.a.hasOwnProperty("disabled")&&(r.a.value=r.f),"selected"in r.a&&n.select.getAttribute("value")!==undefined&&delete r.a.selected}}(us),fs=function(e,t,n,r,i,s,o,u,a,f,l,c){var h;return c.push(function(){h=c.Fragment}),function(p){var d,v,m,g,y,b;this.type=e.ELEMENT,d=this.parentFragment=p.parentFragment,v=this.template=p.template,this.parent=p.pElement||d.pElement,this.root=g=d.root,this.index=p.index,this.cssDetachQueue=[],this.namespace=r(v,this.parent),this.name=m!==t.html?n(v.e):v.e,this.name==="option"&&l(this,v),this.name==="select"&&(this.options=[],this.bubble=f),this.attributes=i(this,v.a),v.f&&(this.fragment=new h({template:v.f,root:g,owner:this,pElement:this})),g.twoway&&(y=s(this,v.a))&&(this.binding=y,b=this.root._twowayBindings[y.keypath]||(this.root._twowayBindings[y.keypath]=[]),b.push(y)),v.v&&(this.eventHandlers=o(this,v.v)),v.o&&(this.decorator=new u(this,v.o)),v.t0&&(this.intro=this.outro=new a(this,v.t0)),v.t1&&(this.intro=new a(this,v.t1)),v.t2&&(this.outro=new a(this,v.t2))}}(rt,c,Qr,Gr,Ei,Pi,Ui,zi,rs,os,as,i),ls=function(e){return function(n,r){return n===r||e(n,r)}}(rr),cs=function(e,t){return function(r,i,s,o){var u=r[i];if(!u||e(u,o)||!e(u,s))return;r[i]=t(u,s,o)}}(ls,ir),hs=function(e){return function(n,r,i,s){function l(e){e.rebind(n,r,i,s)}var o,u,a,f;this.attributes&&this.attributes.forEach(l),this.eventHandlers&&this.eventHandlers.forEach(l),this.binding&&l(this.binding),this.fragment&&l(this.fragment);if(a=this.liveQueries){f=this.root,o=a.length;while(o--)a[o]._makeDirty()}this.node&&(u=this.node._ractive)&&(e(u,"keypath",i,s),n!=undefined&&
(u.index[n]=r))}}(cs),ps=function(t){var n,r,i;((n=t.getAttribute("width"))||(r=t.getAttribute("height")))&&t.node.addEventListener("load",i=function(){n&&(t.node.width=n.value),r&&(t.node.height=r.value),t.node.removeEventListener("load",i,!1)},!1)},ds=function(e,t,n,r,i,s,o,u,a){function c(t){var n,r,i;r=t.select.getAttribute("value");if(r===undefined)return;n=t.getAttribute("value");if(t.select.node.multiple&&e(r)){i=r.length;while(i--)if(n==r[i]){t.node.selected=!0;break}}else t.node.selected=n==r}function h(e){var t,n,r,i,s;t=e.root;do{n=t._liveQueries,r=n.length;while(r--)i=n[r],s=n["_"+i],s._test(e)&&(e.liveQueries||(e.liveQueries=[])).push(s)}while(t=t._parent)}var f,l;return f=function(){var e=this.node,t=this.fragment.toString(!1);if(e.styleSheet)e.styleSheet.cssText=t;else{while(e.hasChildNodes())e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}},l=function(){(!this.node.type||this.node.type==="text/javascript")&&t("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString(!1)},function(){var t=this,p=this.root,d,v;d=this.node=r(this.name,this.namespace),p.constructor.css&&this.parentFragment.getNode()===p.el&&this.node.setAttribute("data-rvcguid",p.constructor._guid),i(this.node,"_ractive",{value:{proxy:this,keypath:u(this.parentFragment),index:this.parentFragment.indexRefs,events:n(null),root:p}}),this.attributes.forEach(function(e){return e.render(d)}),this.fragment&&(this.name==="script"?(this.bubble=l,this.node.text=this.fragment.toString(!1),this.fragment.unrender=s):this.name==="style"?(this.bubble=f,this.bubble(),this.fragment.unrender=s):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=s:this.node.appendChild(this.fragment.render())),this.eventHandlers&&this.eventHandlers.forEach(function(e){return e.render()}),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),this.name==="img"&&a(this),this.decorator&&this.decorator.fn&&o.afterViewUpdate(function(){t.decorator.init()});if(v=this.intro)o.registerTransition(v),o.afterViewUpdate(function(){return v.start(!0)});return this.name==="option"&&c(this),this.node.autofocus&&o.afterViewUpdate(function(){return t.node.focus()}),h(this),this.node}}(o,H,U,h,d,Jn,D,k,ps),vs=function(){this.fragment&&this.fragment.teardown();while(this.attributes.length)this.attributes.pop().teardown()},ms=function(e,t){function n(e){var n,r,i;n=e.getAttribute("value");if(n===undefined)return!1;r=e.select.getAttribute("value");if(r==n)return!0;if(e.select.attributes.multiple&&t(r)){i=r.length;while(i--)if(r[i]==n)return!0}}function r(e){var t,n,r,i;t=e.attributes,n=t.type,r=t.value,i=t.name;if(!n||n.value!=="radio"||!r||!i.interpolator)return;if(r.value===i.interpolator.value)return!0}function i(e){var t=e.toString();return t?" "+t:""}return function(){var t,s;return t="<"+(this.template.y?"!doctype":this.template.e),t+=this.attributes.map(i).join(""),this.name==="option"&&n(this)&&(t+=" selected"),this.name==="input"&&r(this)&&(t+=" checked"),t+=">",this.fragment&&(s=this.name!=="script"&&this.name!=="style",t+=this.fragment.toString(s)),e.test(this.template.e)||(t+="</"+this.template.e+">"),t}}(Pt,o),gs=function(e){function t(e){var t,n,r;r=e.liveQueries.length;while(r--)t=e.liveQueries[r],n=t.selector,t._remove(e.node)}return function(r){var i,s,o;r&&(this.willDetach=!0,e.detachWhenReady(this)),this.fragment&&this.fragment.unrender(!1);if(i=this.binding)this.binding.unrender(),this.node._ractive.binding=null,s=this.root._twowayBindings[i.keypath],s.splice(s.indexOf(i),1);this.eventHandlers&&this.eventHandlers.forEach(function(e){return e.unrender()}),this.decorator&&this.decorator.teardown();if(o=this.outro)e.registerTransition(o),e.afterViewUpdate(function(){return o.start(!1)});this.liveQueries&&t(this)}}(D),ys=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=function(e){this.init(e)};return v.prototype={bubble:e,detach:t,find:n,findAll:r,findAllComponents:i,findComponent:s,findNextNode:o,firstNode:u,getAttribute:a,init:f,rebind:l,render:c,teardown:h,toString:p,unrender:d},v}(Rr,Ur,zr,Wr,Xr,Vr,$r,Jr,Kr,fs,hs,ds,vs,ms,gs),bs=function(){function n(e,n){var r=t.exec(n)[0];return e===null||r.length<e.length?r:e}var e=/^\s*$/,t=/^\s*/;return function(t){var r,i,s,o;return r=t.split("\n"),i=r[0],i!==undefined&&e.test(i)&&r.shift(),s=r[r.length-1],s!==undefined&&e.test(s)&&r.pop(),o=r.reduce(n,null),o&&(t=r.map(function(e){return e.replace(o,"")}).join("\n")),t}}(),ws=function(e,t,n,r){function i(e,r){var i=t.registries.partials.findInstance(e,r);if(i){var s=i.partials[r];return n.isParsed(s)||(s=n.parse(s,i.parseOptions),i.partials[r]=s=t.template.processCompound(i,s)),s}}return function(o,u){var a,f;if(a=i(o,u))return a;a=n.fromId(u,{noThrow:!0});if(a){a=r(a);var l=n.parse(a,o.parseOptions);return o.partials[u]=t.template.processCompound(o,l)}f='Could not find template for partial "'+u+'"';if(o.debug)throw new Error(f);return e(f),[]}}(H,en,Vt,bs),Es=function(e,t){var n;return t?(n=e.split("\n").map(function(e,n){return n?t+e:e}).join("\n"),n):e},Ss=function(e,t,n,r){var i,s;return r.push(function(){s=r.Fragment}),i=function(n){var r=this.parentFragment=n.parentFragment,i;this.type=e.PARTIAL,this.name=n.template.r,this.index=n.index;if(!n.template.r)throw new Error("Partials must have a static reference (no expressions). This may change in a future version of Ractive.");i=t(r.root,n.template.r),this.fragment=new s({template:i,root:r.root,owner:this,pElement:r.pElement})},i.prototype={firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.fragment.detach()},render:function(){return this.fragment.render()},unrender:function(e){this.fragment.unrender(e)},rebind:function(e,t,n,r){return this.fragment.rebind(e,t,n,r)},teardown:function(){this.fragment.teardown()},toString:function(t){var r,i,s,o;return r=this.fragment.toString(t),i=
this.parentFragment.items[this.index-1],!i||i.type!==e.TEXT?r:(s=i.template.split("\n").pop(),(o=/^\s+$/.exec(s))?n(r,o[0]):r)},find:function(e){return this.fragment.find(e)},findAll:function(e,t){return this.fragment.findAll(e,t)},findComponent:function(e){return this.fragment.findComponent(e)},findAllComponents:function(e,t){return this.fragment.findAllComponents(e,t)}},i}(rt,ws,Es,i),xs=function(){return this.instance.fragment.detach()},Ts=function(t){return this.instance.fragment.find(t)},Ns=function(t,n){return this.instance.fragment.findAll(t,n)},Cs=function(t,n){n._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(t,n)},ks=function(t){return!t||t===this.name?this.instance:this.instance.fragment?this.instance.fragment.findComponent(t):null},Ls=function(){return this.parentFragment.findNextNode(this)},As=function(){return this.rendered?this.instance.fragment.firstNode():null},Os=function(e,t){var n,r,i;return t.push(function(){n=t.Fragment}),r={parse:!0},i=function(e,t,i){this.parentFragment=e.parentFragment,this.component=e,this.key=t,this.fragment=new n({template:i,root:e.root,owner:this}),this.value=this.fragment.getValue(r)},i.prototype={bubble:function(){var t=this;this.dirty||(this.dirty=!0,e.afterModelUpdate(function(){t.update(),t.dirty=!1}))},update:function(){var e=this.fragment.getValue(r);this.component.instance.set(this.key,e),this.value=e},teardown:function(){this.fragment.teardown()}},i}(D,i),Ms=function(e,t,n,r){function i(i,s,o,u){var a,f,l,c,h,p;return l=i.root,c=i.parentFragment,typeof o=="string"?(f=t(o),f?f.value:o):o===null?!0:o.length===1&&o[0].t===e.INTERPOLATOR&&o[0].r?c.indexRefs&&c.indexRefs[p=o[0].r]!==undefined?(i.indexRefBindings[p]=s,c.indexRefs[p]):(h=n(l,o[0].r,c)||o[0].r,u.push({childKeypath:s,parentKeypath:h}),l.viewmodel.get(h)):(a=new r(i,s,o),i.complexParameters.push(a),a.value)}return function(e,t,n,r){var s={},o,u;e.complexParameters=[];for(o in n)if(n.hasOwnProperty(o)){u=i(e,o,n[o],r);if(u!==undefined||t[o]===undefined)s[o]=u}return s}}(rt,qt,L,Os),_s=function(e,t,n,r){var i,s,o,u;return s=e.parentFragment,u=e.root,o={content:r||[]},i=new t({append:!0,data:n,partials:o,magic:u.magic||t.defaults.magic,modifyArrays:u.modifyArrays,_parent:u,_component:e,adapt:u.adapt}),i},Ds=function(e,t,n){var r=function(e,t,n,r,i){this.root=e,this.keypath=t,this.priority=i,this.otherInstance=n,this.otherKeypath=r,e.viewmodel.register(this),this.value=this.root.viewmodel.get(this.keypath)};return r.prototype={setValue:function(r){if(this.updating||this.counterpart&&this.counterpart.updating)return;if(t(r)&&r._ractive&&r._ractive.setting)return;n(r,this.value)||(this.updating=!0,e.addInstance(this.otherInstance),this.otherInstance.viewmodel.set(this.otherKeypath,r),this.value=r,this.updating=!1)},rebind:function(e){this.root.viewmodel.unregister(this),this.counterpart.root.viewmodel.unregister(this.counterpart),this.keypath=e,this.counterpart.otherKeypath=e,this.root.viewmodel.register(this),this.counterpart.root.viewmodel.register(this.counterpart)},teardown:function(){this.root.viewmodel.unregister(this)}},function(t,n,i,s){var o,u,a,f,l,c;o=i+"="+s,a=t.bindings;if(a[o])return;a[o]=!0,u=t.instance,f=t.parentFragment.priority,l=new r(n,i,u,s,f),a.push(l),u.twoway&&(c=new r(u,s,n,i,1),a.push(c),l.counterpart=c,c.counterpart=l)}}(D,o,y),Ps=function(e){return function(n,r){r.forEach(function(r){var i,s;e(n,n.root,r.parentKeypath,r.childKeypath),i=n.instance.viewmodel.get(r.childKeypath),s=n.root.viewmodel.get(r.parentKeypath),i!==undefined&&s===undefined&&n.root.viewmodel.set(r.parentKeypath,i)})}}(Ds),Hs=function(e){function n(n,r,i,s){if(typeof s!="string"){if(r.debug)throw new Error(t);e(t);return}n.on(i,function(){var e=Array.prototype.slice.call(arguments);e.unshift(s),r.fire.apply(r,e)})}var t="Components currently only support simple events - you cannot include arguments. Sorry!";return function(e,t){var r;for(r in t)t.hasOwnProperty(r)&&n(e.instance,e.root,r,t[r])}}(H),Bs=function(e){var t,n;t=e.root;while(t)(n=t._liveComponentQueries["_"+e.name])&&n.push(e.instance),t=t._parent},js=function(e,t,n,r,i,s,o,u){return function(f){var l,c,h,p,d;l=this.parentFragment=f.parentFragment,c=l.root,this.root=c,this.type=e.COMPONENT,this.name=f.template.e,this.index=f.index,this.indexRefBindings={},this.bindings=[],h=u.registries.components.find(c,this.name);if(!h)throw new Error('Component "'+this.name+'" not found');d=[],p=n(this,h.defaults.data||{},f.template.a,d),r(this,h,p,f.template.f),i(this,d),s(this,f.template.v),(f.template.t1||f.template.t2||f.template.o)&&t('The "intro", "outro" and "decorator" directives have no effect on components'),o(this)}}(rt,H,Ms,_s,Ps,Hs,Bs,en),Fs=function(e){return function(n,r,i,s){var o=this.instance,u=o._parent,a,f;this.bindings.forEach(function(t){var a;if(t.root!==u)return;t.keypath===n&&o.set(t.otherKeypath,r),(a=e(t.keypath,i,s))&&t.rebind(a)}),(a=this.indexRefBindings[n])&&o.set(a,r),(f=this.root._liveComponentQueries["_"+this.name])&&f._makeDirty()}}(ir),Is=function(){var t=this.instance;return t.render(this.parentFragment.getNode()).then(function(){var e;(e=t.complete)&&e.call(t)}),this.rendered=!0,t.detach()},qs=function(){function e(e){var t,n;t=e.root;do(n=t._liveComponentQueries["_"+e.name])&&n._remove(e);while(t=t._parent)}return function(){while(this.complexParameters.length)this.complexParameters.pop().teardown();while(this.bindings.length)this.bindings.pop().teardown();e(this),this.shouldDestroy=!1,this.instance.fragment.teardown()}}(),Rs=function(){return this.instance.fragment.toString()},Us=function(t){this.shouldDestroy=t,this.instance.unrender()},zs=function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(e){this.init(e)};return p.prototype={detach:e,find:t,findAll:n,findAllComponents:r,findComponent:i,findNextNode:s,firstNode:o,init:u,rebind:a,render:f,teardown:l,toString:c,unrender:h},p}(xs,Ts,Ns,Cs,ks,Ls,As,js,Fs,Is,qs,Rs,Us),Ws=function(e,t,n){var r=function(t){this.type=e.COMMENT,
this.value=t.template.c};return r.prototype={detach:n,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},teardown:t,toString:function(){return"<!--"+this.value+"-->"},unrender:function(e){e&&this.node.parentNode.removeChild(this.node)}},r}(rt,Jn,Qn),Xs=function(e,t,n,r,i,s,o,u,a,f){return function(c){if(typeof c.template=="string")return new t(c);switch(c.template.t){case e.INTERPOLATOR:return new n(c);case e.SECTION:return new r(c);case e.TRIPLE:return new i(c);case e.ELEMENT:if(f.registries.components.find(c.parentFragment.root,c.template.e))return new u(c);return new s(c);case e.PARTIAL:return new o(c);case e.COMMENT:return new a(c);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}}(rt,Gn,cr,Lr,qr,ys,Ss,zs,Ws,en),Vs=function(e,t,n){return function(i){var s=this,o,u,a;this.owner=i.owner,o=this.parent=this.owner.parentFragment,this.root=i.root,this.pElement=i.pElement,this.context=i.context,this.owner.type===e.SECTION&&(this.index=i.index);if(o){u=o.indexRefs;if(u){this.indexRefs=t(null);for(a in u)this.indexRefs[a]=u[a]}}this.priority=o?o.priority+1:1,i.indexRef&&(this.indexRefs||(this.indexRefs={}),this.indexRefs[i.indexRef]=i.index),typeof i.template=="string"?i.template=[i.template]:i.template||(i.template=[]),this.items=i.template.map(function(e,t){return n({parentFragment:s,pElement:i.pElement,template:e,index:t})}),this.inited=!0}}(rt,U,Xs),$s=function(e){return function(n,r,i,s){e(this,"context",i,s),this.indexRefs&&this.indexRefs[n]!==undefined&&this.indexRefs[n]!==r&&(this.indexRefs[n]=r),this.items.forEach(function(e){e.rebind&&e.rebind(n,r,i,s)})}}(cs),Js=function(){var t;return this.items.length===1?t=this.items[0].render():(t=document.createDocumentFragment(),this.items.forEach(function(e){t.appendChild(e.render())})),this.rendered=!0,t},Ks=function(){this.items.forEach(function(e){return e.teardown()})},Qs=function(t){return this.items?this.items.map(function(e){return e.toString(t)}).join(""):""},Gs=function(t){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(e){return e.unrender(t)})},Ys=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=function(e){this.init(e)};return g.prototype={bubble:e,detach:t,find:n,findAll:r,findAllComponents:i,findComponent:s,findNextNode:o,firstNode:u,getNode:a,getValue:f,init:l,rebind:c,render:h,teardown:p,toString:d,unrender:v},m.Fragment=g,g}(jn,Fn,In,qn,Rn,Un,zn,Wn,Xn,Vn,Vs,$s,Js,Ks,Qs,Gs,i),Zs=function(e,t,n,r,i){var s=["template","partials","components","decorators","events"];return function(u,a){var f,l,c,h,p,d;typeof u=="function"&&!a?(a=u,u={}):u=u||{};if(typeof u!="object")throw new Error("The reset method takes either no arguments, or an object containing new data");(c=this.viewmodel.wrapped[""])&&c.reset?c.reset(u)===!1&&(this.data=u):this.data=u,h=i.reset(this),p=h.length;while(p--)if(s.indexOf(h[p]>-1)){d=!0;break}return f=new e(function(e){l=e}),d?(this.viewmodel.clearCache(""),n(this,""),this.unrender(),this.fragment.template!==this.template&&(this.fragment.teardown(),this.fragment=new r({template:this.template,root:this,owner:this})),this.render(this.el,this.anchor).then(l)):(t.start(this,l),this.viewmodel.clearCache(""),n(this,""),t.end()),this.fire("reset",u),a&&f.then(a),f}}(b,D,M,Ys,en),eo=function(e,t){return function(r){var i;e.template.init(null,this,{template:r}),i=this.transitionsEnabled,this.transitionsEnabled=!1,this.unrender(),this.fragment.teardown(),this.fragment=new t({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=i}}(en,Ys),to=function(e,t,n,r,i){var s=/\*/;return function(u,a,f){var l=this,c,h,p;h=new r(function(e){p=e}),e.start(this,p);if(t(u)){c=u,f=a;for(u in c)c.hasOwnProperty(u)&&(a=c[u],u=n(u),this.viewmodel.set(u,a))}else u=n(u),s.test(u)?i(this,u).forEach(function(e){l.viewmodel.set(e,a)}):this.viewmodel.set(u,a);return e.end(),f&&h.then(f.bind(this)),h}}(D,u,w,b,kn),no=function(e){return function(n,r){return e(this,n,r===undefined?-1:-r)}}(m),ro=function(e){return function(n){var r;return this.fire("teardown"),this.fragment.teardown(),this.viewmodel.teardown(),r=this.rendered?this.unrender():e.resolve(),n&&r.then(n.bind(this)),r}}(b),io=function(){return this.fragment.toString(!0)},so=function(t,n){var r;if(typeof t!="string"){if(this.debug)throw new Error("Bad arguments");return}return r=this.get(t),this.set(t,!r,n)},oo=function(e,t,n,r,i){return function(){var o=this,u,a,f,l,c;if(!this.rendered)throw new Error("ractive.unrender() was called on a Ractive instance that was not rendered");u=new t(function(e){a=e}),r.start(this,a),f=!this.component||this.component.shouldDestroy;if(this.constructor.css)if(f)u.then(function(){return i.remove(o.constructor)});else{l=this.component.parentFragment;do{if(l.owner.type!==e.ELEMENT)continue;l.owner.willDetach&&(c=l.owner)}while(!c&&(l=l.parent));if(!c)throw new Error("A component is being torn down but doesn't have a nearest detaching element... this shouldn't happen!");c.cssDetachQueue.push(this.constructor)}while(this._animations[0])this._animations[0].stop();return this.fragment.unrender(f),this.rendered=!1,n(this.el.__ractive_instances__,this),r.end(),u}}(rt,b,T,D,N),uo=function(e,t,n){return function(i,s){var o,u;return typeof i=="function"?(s=i,i=""):i=i||"",o=new t(function(e){u=e}),e.start(this,u),this.viewmodel.clearCache(i),n(this,i),e.end(),this.fire("update",i),s&&o.then(s.bind(this)),o}}(D,b,M),ao=function(e,t,n){function r(e,i,s,o,u){var a,f,l,c,h,p;a=e._twowayBindings[i];if(a){l=a.length;while(l--){c=a[l];if(c.radioName&&!c.element.node.checked)continue;if(c.checkboxName){c.changed()&&o[i]!==!0&&(o[i]=!0,o.push(i));continue}h=c.attribute.value,p=c.getValue();if(t(h,p))continue;n(h,p)||(s[i]=p)}}if(!u)return;f=e.viewmodel.depsMap[i];if(f){l=f.length;while(
l--)r(e,f[l],s,o,u)}}return function(n,i){var s,o,u;typeof n!="string"&&(n="",i=!0),r(this,n,s={},o=[],i);if(u=o.length)while(u--)n=o[u],s[n]=e(this,n);return this.set(s)}}(C,Ai,y),fo=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){return{add:e,animate:t,detach:n,find:r,findAll:i,findAllComponents:s,findComponent:o,fire:u,get:a,insert:f,merge:l,observe:c,off:h,on:p,render:d,reset:v,resetTemplate:m,set:g,subtract:y,teardown:b,toHTML:w,toggle:E,unrender:S,update:x,updateModel:T}}(g,rn,sn,on,mn,gn,yn,bn,wn,Sn,Nn,Mn,Pn,Hn,Bn,Zs,eo,to,no,ro,io,so,oo,uo,ao),lo=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;return t=Math.random()*16|0,n=e=="x"?t:t&3|8,n.toString(16)})},co=function(e,t,n){switch(t){case"splice":return n;case"sort":case"reverse":return null;case"pop":if(e.length)return[-1];return null;case"push":return[e.length,0].concat(n);case"shift":return[0,1];case"unshift":return[0,0].concat(n)}},ho=function(e,t){var n,r,i,s,o,u,a;return t?(n=+(t[0]<0?e.length+t[0]:t[0]),o=Math.max(0,t.length-2),u=t[1]!==undefined?t[1]:e.length-n,u=Math.min(u,e.length-n),a=o-u,s=e.length+a,a?(r=Math.max(e.length,s),i=Math.max(e.length,s)):r=i=n+o,{rangeStart:n,rangeEnd:r,clearEnd:i,balance:a,added:o,removed:u}):null},po=function(e,t,n){return function(r,i,s,o){var u,a,f,l,c;u=r.root,a=r.keypath,u.viewmodel.changes.push(a);if(s==="sort"||s==="reverse"){u.viewmodel.set(a,i);return}if(!o)return;for(l=o.rangeStart;l<o.clearEnd;l+=1)u.viewmodel.clearCache(a+"."+l);if(u._patternObservers.length)for(l=o.rangeStart;l<o.rangeEnd;l+=1)n(u,a+"."+l,a+"."+l,!1,!0);f=function(t){t.keypath===a&&t.type===e.SECTION&&!t.inverted&&t.docFrag?t.splice(o):t.setValue(t.root.viewmodel.get(t.keypath))},u.viewmodel.deps.forEach(function(e){var t=e[a];t&&t.forEach(f)});if(o.added&&o.removed)for(l=o.rangeStart;l<o.rangeEnd;l+=1)c=a+"."+l,t(u,c);o.balance&&(u.viewmodel.clearCache(a+".length"),t(u,a+".length",!0))}}(rt,M,O),vo=function(e,t,n,r,i){var s=[],o=["pop","push","reverse","shift","sort","splice","unshift"],u,a,f;return o.forEach(function(o){var u=function(){var t,s,u,a,f;t=n(this,o,Array.prototype.slice.call(arguments)),s=r(this,t),u=Array.prototype[o].apply(this,arguments),this._ractive.setting=!0,f=this._ractive.wrappers.length;while(f--)a=this._ractive.wrappers[f],e.start(a.root),i(a,this,o,s),e.end();return this._ractive.setting=!1,u};t(s,o,{value:u})}),u={},u.__proto__?(a=function(e){e.__proto__=s},f=function(e){e.__proto__=Array.prototype}):(a=function(e){var n,r;n=o.length;while(n--)r=o[n],t(e,r,{value:s[r],configurable:!0})},f=function(e){var t;t=o.length;while(t--)delete e[o[t]]}),a.unpatch=f,a}(D,d,co,ho,po),mo=function(e,t,n){var r,i,s;return r={filter:function(e){return t(e)&&(!e._ractive||!e._ractive.setting)},wrap:function(e,t,n){return new i(e,t,n)}},i=function(t,r,i){this.root=t,this.value=r,this.keypath=i,r._ractive||(e(r,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),n(r)),r._ractive.instances[t._guid]||(r._ractive.instances[t._guid]=0,r._ractive.instances.push(t)),r._ractive.instances[t._guid]+=1,r._ractive.wrappers.push(this)},i.prototype={get:function(){return this.value},teardown:function(){var e,t,r,i,o;e=this.value,t=e._ractive,r=t.wrappers,i=t.instances;if(t.setting)return!1;o=r.indexOf(this);if(o===-1)throw new Error(s);r.splice(o,1);if(!r.length)delete e._ractive,n.unpatch(this.value);else{i[this.root._guid]-=1;if(!i[this.root._guid]){o=i.indexOf(this.root);if(o===-1)throw new Error(s);i.splice(o,1)}}}},s="Something went wrong in a rather interesting way",r}(d,o,vo),go=function(){var e=/^\s*[0-9]+\s*$/;return function(t){return e.test(t)?[]:{}}}(),yo=function(e,t,n,r){function u(t,n,i){function c(t){var i,s;t.value=n;if(t.updating)return;s=t.ractive,i=t.keypath,t.updating=!0,e.start(s),s.viewmodel.changes.push(i),s.viewmodel.clearCache(i),r(s,i),e.end(),t.updating=!1}var s,o,u,a,f,l;s=t.obj,o=t.prop;if(i&&!i.configurable){if(o==="length")return;throw new Error('Cannot use magic mode with property "'+o+'" - object is not configurable')}i&&(u=i.get,a=i.set),f=u||function(){return n},l=function(e){a&&a(e),n=u?u():e,l._ractiveWrappers.forEach(c)},l._ractiveWrappers=[t],Object.defineProperty(s,o,{get:f,set:l,enumerable:!0,configurable:!0})}var i,s;try{Object.defineProperty({},"test",{value:0}),i={filter:function(e,t,r){var i,s,o,u,a;return t?(i=t.split("."),s=i.pop(),o=i.join("."),(u=r.viewmodel.wrapped[o])&&!u.magic?!1:(a=r.get(o),n(a)&&/^[0-9]+$/.test(s)?!1:a&&(typeof a=="object"||typeof a=="function"))):!1},wrap:function(e,t,n){return new s(e,t,n)}},s=function(e,t,n){var r,i,s,o;this.magic=!0,this.ractive=e,this.keypath=n,this.value=t,r=n.split("."),this.prop=r.pop(),i=r.join("."),this.obj=i?e.get(i):e.data,s=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop);if(s&&s.set&&(o=s.set._ractiveWrappers)){o.indexOf(this)===-1&&o.push(this);return}u(this,t,s)},s.prototype={get:function(){return this.value},reset:function(e){if(this.updating)return;this.updating=!0,this.obj[this.prop]=e,this.ractive.viewmodel.clearCache(this.keypath),this.updating=!1},set:function(e,n){if(this.updating)return;this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=t(e),this.updating=!1),this.obj[this.prop][e]=n},teardown:function(){var e,t,n,r,i;if(this.updating)return!1;e=Object.getOwnPropertyDescriptor(this.obj,this.prop),t=e&&e.set;if(!t)return;r=t._ractiveWrappers,i=r.indexOf(this),i!==-1&&r.splice(i,1),r.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n)}}}catch(o){i=!1}return i}(D,go,o,M),bo=function(e,t){var n,r;return e&&(n={filter:function(n,r,i){return e.filter(n,r,i)&&t.filter(n)},wrap:function(e,t,n){return new r(e,t,n)}},r=function(n,r,i){this.value=r,this.magic=!0,this.magicWrapper=e.wrap(n,r,i),this.arrayWrapper=t.wrap(n,r,i)},r.prototype={get:function(){return this.value},teardown:function(){
this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(e){return this.magicWrapper.reset(e)}}),n}(yo,mo),wo=function(e,t,n,r){function s(e,t){var n={},r;if(!t)return e;t+=".";for(r in e)e.hasOwnProperty(r)&&(n[t+r]=e[r]);return n}function o(e){var t;return i[e]||(t=e?e+".":"",i[e]=function(n,r){var i;if(typeof n=="string")return i={},i[t+n]=r,i;if(typeof n=="object")return t?s(n,e):n}),i[e]}var i={};return function(s,u,a){var f=this.ractive,l,c,h,p;l=f.adapt.length;for(c=0;c<l;c+=1){h=f.adapt[c];if(typeof h=="string"){var d=e.registries.adaptors.find(f,h);if(!d)throw new Error('Missing adaptor "'+h+'"');h=f.adapt[c]=d}if(h.filter(u,s,f))return p=this.wrapped[s]=h.wrap(f,u,s,o(s)),p.value=u,u}return a||(f.magic?r.filter(u,s,f)?this.wrapped[s]=r.wrap(f,u,s):n.filter(u,s,f)&&(this.wrapped[s]=n.wrap(f,u,s)):f.modifyArrays&&t.filter(u,s,f)&&(this.wrapped[s]=t.wrap(f,u,s))),u}}(en,mo,yo,bo),Eo=function(){this.capturing=!0,this.captured=[]},So=function(t,n){var r,i,s;n||(i=this.wrapped[t])&&i.teardown()!==!1&&(this.wrapped[t]=null),(s=this.computations[t])&&s.compute(),this.cache[t]=undefined;if(r=this.cacheMap[t])while(r.length)this.clearCache(r.pop())},xo=function(){var e=Object.prototype.toString;return function(t){return typeof t=="boolean"||typeof t=="object"&&e.call(t)==="[object Boolean]"}}(),To=function(){var e=Object.prototype.toString;return function(t){return e.call(t)==="[object Date]"}}(),No=function(){var e=Object.prototype.toString;return function(t){return typeof t=="number"||typeof t=="object"&&e.call(t)==="[object Number]"}}(),Co=function(){var e=Object.prototype.toString;return function(t){return e.call(t)==="[object RegExp]"}}(),ko=function(){var e=Object.prototype.toString;return function(t){return typeof t=="string"||typeof t=="object"&&e.call(t)==="[object String]"}}(),Lo=function(e,t,n,r,i,s){return function(o){var u,a;if(!o||typeof o=="function"||t(o)||r(o)||s(o))return o;if(e(o))return o.slice();if(n(o))return new Date(o);if(i(o))return new RegExp(o);u={};for(a in o)o.hasOwnProperty(a)&&(u[a]=o[a]);return u}}(o,xo,To,No,Co,ko),Ao=function(e){function t(t,n,r,i,s){n.viewmodel.set(i,s,!0),e(n.component,t,r,i)}return function(n,r){var i,s,o,u,a;i=n._parent,s=n.component.parentFragment;if(s.indexRefs&&(a=s.indexRefs[r])!==undefined)return n.component.indexRefBindings[r]=r,a;do{if(!s.context)continue;o=s.context+"."+r,u=i.viewmodel.get(o);if(u!==undefined)return t(i,n,o,r,u),u}while(s=s.parent);u=i.viewmodel.get(r);if(u!==undefined)return t(i,n,r,r,u),u}}(Ds),Oo={FAILED_LOOKUP:!0},Mo=function(e,t,n){var r={},i=function(e,n){this.viewmodel=e,this.root=e.ractive,this.ref=n,this.parentFragment=r,e.unresolvedImplicitDependencies[n]=!0,e.unresolvedImplicitDependencies.push(this),t.addUnresolved(this)};return i.prototype={resolve:function(){n(this.viewmodel.ractive,this.ref),this.viewmodel.unresolvedImplicitDependencies[this.ref]=!1,e(this.viewmodel.unresolvedImplicitDependencies,this)},teardown:function(){t.removeUnresolved(this)}},i}(T,D,M),_o=function(e,t,n,r,i){function o(n,i){var s,o,u,a,f,l,c,h;s=i.split("."),o=s.pop(),u=s.join("."),a=n.get(u);if(c=n.wrapped[u])a=c.get();if(a===null||a===undefined)return;return(f=n.cacheMap[u])?f.indexOf(i)===-1&&f.push(i):n.cacheMap[u]=[i],typeof a!="object"||o in a?(h=!e.call(a,o),l=h?t(a[o]):a[o],l=n.adapt(i,l,!1),n.cache[i]=l,l):n.cache[i]=r}var s={};return function(t){var u=arguments[1];u===void 0&&(u=s);var a=this.ractive,f=this.cache,l,c,h,p,d,v;return f[t]===undefined?((p=this.computations[t])?l=p.value:(d=this.wrapped[t])?l=d.value:t?(v=this.evaluators[t])?l=v.value:l=o(this,t):(this.adapt("",a.data),l=a.data),f[t]=l):l=f[t],l===r&&(c=t.split(".")[0],h=c===t||this.get(c)===undefined,a._parent&&!a.isolated&&h?l=n(a,t,u):l=undefined),u.evaluateWrapped&&(d=this.wrapped[t])&&(l=d.get()),this.capturing&&this.captured[t]!==!0&&(this.captured.push(t),this.captured[t]=!0,l===undefined&&this.unresolvedImplicitDependencies[t]!==!0&&new i(this,t)),l}}(s,Lo,Ao,Oo,Mo),Do=function(){function e(e,t){var n,r,i;n=t.split(".");while(n.length)n.pop(),r=n.join("."),i=e.depsMap[r]||(e.depsMap[r]=[]),i[t]===undefined&&(i[t]=0,i[i.length]=t),i[t]+=1,t=r}return function(n){var r,i,s,o,u;s=n.keypath,o=n.priority,r=this.deps[o]||(this.deps[o]={}),i=r[s]||(r[s]=[]),i.push(n),n.registered=!0;if(!s)return;if(u=this.evaluators[s])u.dependants||u.wake(),u.dependants+=1;e(this,s)}}(),Po=function(){return this.captured},Ho=function(e,t,n){return function(i,s,o){var u,a,f,l,c,h,p,d;if(e(this.cache[i],s))return;c=this.computations[i],h=this.wrapped[i],p=this.evaluators[i],c&&!c.setting&&c.set(s),h&&h.reset&&(d=h.reset(s)!==!1,d&&(s=h.get())),p&&(p.value=s),!c&&!p&&!d&&(u=i.split("."),a=u.pop(),f=u.join("."),h=this.wrapped[f],h&&h.set?h.set(a,s):(l=h?h.get():this.get(f),l||(l=t(a),this.set(f,l,!0)),l[a]=s)),this.clearCache(i,d),o||(this.changes.push(i),n(this.ractive,i))}}(y,go,M),Bo=function(){var t=this,n;Object.keys(this.cache).forEach(function(e){return t.clearCache(e)});while(n=this.unresolvedImplicitDependencies.pop())n.teardown()},jo=function(){function e(e,t){var n,r,i;n=t.split(".");while(n.length)n.pop(),r=n.join("."),i=e.depsMap[r],i[t]-=1,i[t]||(i.splice(i.indexOf(t),1),i[t]=undefined),t=r}return function(n){var r,i,s,o,u;s=n.keypath,o=n.priority,r=this.deps[o][s],i=r.indexOf(n);if(i===-1||!n.registered)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");r.splice(i,1),n.registered=!1;if(!s)return;if(u=this.evaluators[s])u.dependants-=1,u.dependants||u.sleep();e(this,s)}}(),Fo=function(e,t,n,r,i,s,o,u,a,f){var l=function(t){this.ractive=t,this.cache={},this.cacheMap=e(null),this.deps=[],this.depsMap=e(null),this.wrapped=e(null),this.evaluators=e(null),this.computations=e(null),this.captured=null,this.unresolvedImplicitDependencies=[],this.changes=[]};return l.prototype=
{adapt:t,capture:n,clearCache:r,get:i,register:s,release:o,set:u,teardown:a,unregister:f},l}(U,wo,Eo,So,_o,Do,Po,Ho,Bo,jo),Io=function(e,t,n,r,i,s,o){function u(e){var t;if(t=r(e.el)){var n=e.transitionsEnabled;e.noIntro&&(e.transitionsEnabled=!1),t&&!e.append&&(t.__ractive_instances__&&t.__ractive_instances__.splice(0).forEach(function(e){return e.teardown()}),t.innerHTML=""),e.render(t,e.append).then(function(){e.complete&&e.complete.call(e)}),e.transitionsEnabled=n}}function a(e,r){n(e,{_guid:{value:i()},_subs:{value:t(null),configurable:!0},_config:{value:{}},_patternObservers:{value:[]},_twowayBindings:{value:t(null)},_checkboxNameBindings:{value:t(null)},_animations:{value:[]},nodes:{value:{}},_liveQueries:{value:[]},_liveComponentQueries:{value:[]},_childInitQueue:{value:[]},parseOptions:{value:{}}}),r._parent&&r._component&&(n(e,{_parent:{value:r._parent},component:{value:r._component}}),r._component.instance=e)}function f(e){for(var t in e._checkboxNameBindings)e.viewmodel.get(t)===undefined&&e.viewmodel.set(t,e._checkboxNameBindings[t].reduce(function(e,t){return t.isChecked&&e.push(t.element.getAttribute("value")),e},[]))}return function(n){var r=arguments[1];r===void 0&&(r={}),n.viewmodel=new s(n),a(n,r),e.init(n.constructor,n,r),n.fragment=new o({template:n.template,root:n,owner:n}),f(n),u(n)}}(en,U,v,En,lo,Fo,Ys),qo=function(e){return function(n,r,i){n.beforeInit&&n.beforeInit(i),e(n,i)}}(Io),Ro=function(e,t,n,r,i,s,o,u){function l(e,t){for(var n in t)if(!r.keys[n]&&!f[n]&&t.hasOwnProperty(n)){var i=t[n];typeof i=="function"&&(i=u(i,e.prototype[n])),e.prototype[n]=i}}var a,f;return f={_parent:!0,_component:!0},o.push(function(){a=o.Ractive}),function c(o){var u=this,f;return o=o||{},o.prototype instanceof a&&(o=i({},o,o.prototype,o.defaults)),f=function(e){s(this,f,e||{})},f.prototype=e(u.prototype),f.prototype.constructor=f,f.extend=c,t(f,{_guid:{value:n()},defaults:{value:{}}}),r.extend(u,f,o),l(f,o),f}}(U,v,lo,en,j,qo,i,z),Uo=function(e,t,n,r,i,s,o,u,a,f,l){var c=function(e){f(this,e)};c.prototype=s,i(c,{defaults:{value:e},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:t},events:{writable:!0,value:{}},interpolators:{writable:!0,value:n},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}},svg:{value:r},VERSION:{value:"0.4.0"}}),c.prototype.constructor=c,c.Promise=o,c.extend=u,c.parse=a,l.Ractive=c;while(l.length)l.pop()();var h="function";if(typeof Date.now!==h||typeof String.prototype.trim!==h||typeof Object.keys!==h||typeof Array.prototype.indexOf!==h||typeof Array.prototype.forEach!==h||typeof Array.prototype.map!==h||typeof Array.prototype.filter!==h||typeof window!="undefined"&&typeof window.addEventListener!==h)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return c}(n,r,f,l,v,fo,b,Ro,Xt,Io,i);typeof module!="undefined"&&module.exports?module.exports=Uo:typeof define=="function"&&define.amd&&define(function(){return Uo}),e.Ractive=Uo,Uo.noConflict=function(){return e.Ractive=t,Uo}})(typeof window!="undefined"?window:this),e.namespace("Common"),e.extend(n,Ractive),n.prototype.constructor=Ractive,e.Common.Ractive=n,e.Common.RactiveDecorators={},e.Common.RactiveDecorators.imgSource=function(e,t){return e.src=t,{teardown:function(){}}},e.Common.RactiveDecorators.style=function(t,n){var r=e.one(t);return r.setAttribute("style",r.getAttribute("style")+n),{teardown:function(){}}}},"@VERSION@",{requires:["yui-base","node","base"]});
